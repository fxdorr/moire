// +----------------------------------------------------------------------
// | Name 云纹框架
// +----------------------------------------------------------------------
// | Author 唐启云 <tqy@fxri.net>
// +----------------------------------------------------------------------
// | Copyright Copyright © 2017-2099 方弦研究所. All rights reserved.
// +----------------------------------------------------------------------
// | Link https://www.fxri.net
// +----------------------------------------------------------------------
// | Version v0.3
// +----------------------------------------------------------------------
fxView["machine"]["deployer"](["material","elem","checkbox","main"],function(){var e,a,i,t={};t["base"]=e={};t["dark"]=a={};t["tray"]=i={};t["init"]=function(){fxView["machine"]["darker"](a,arguments[0]);e=fxBase["param"]["merge"](e,{},isObject(arguments[1])?arguments[1]:{});a=fxBase["param"]["merge"](a,{echoSwitch:1},a);a["title"]=fxBase["base"]["lang"](a["title"]);t["data"]();fxView["machine"]["caller"](["skins","init",a["skin"]],[a,e,t,i],a);a["run"]["init"]++};t["data"]=function(){if(isBlank(a["shelf"]["data"])){a["shelf"]["data"]={}}else if(!isArray(a["shelf"]["data"])&&!isObject(a["shelf"]["data"])){a["shelf"]["data"]=fxBase["text"]["explode"](",",a["shelf"]["data"])}a["shelf"]["dataEcho"]=fxBase["text"]["implode"]("|",Object.values(a["shelf"]["data"]).reverse());fxView["machine"]["caller"](["skins","data",a["skin"]],[a,e,t,i],a);a["run"]["data"]++};t["deploy"]=function(){if(a["run"]["deploy"])return;a=fxBase["param"]["merge"](a,{wrapBox:{elem:"<div></div>",attr:{"moire-elem":"elem","moire-type":a["type"],"moire-skin":a["skin"]}},elemBox:{elem:"<input>",attr:{type:"checkbox",id:a["id"],name:a["field"],title:a["title"]}}},a);fxView["machine"]["caller"](["before"],[a,e],a);a["wrap"]=$(a["wrapBox"]["elem"]);a["wrap"].attr(a["wrapBox"]["attr"]);a["elem"]=$(a["elemBox"]["elem"]);a["elem"].attr(a["elemBox"]["attr"]);fxView["machine"]["caller"](["skins","deploy",a["skin"]],[a,e,t,i],a);fxView["machine"]["caller"](["after"],[a,e],a);a["run"]["deploy"]++};t["done"]=function(){fxView["machine"]["caller"](["skins","done",a["skin"]],[a,e,t,i],a);fxView["machine"]["caller"](["done"],[a,e],a);a["run"]["done"]++};t["echo"]=function(){a["echo"]=a["elem"].prop("checked")?1:0;fxView["machine"]["caller"](["skins","echo",a["skin"]],[a,e,t,i],a);a["run"]["echo"]++};t["reset"]=function(){a["elem"].prop("checked",!!parseInt(a["data"]));fxView["machine"]["caller"](["skins","reset",a["skin"]],[a,e,t,i],a);a["run"]["reset"]++};t["clean"]=function(){a["elem"].prop("checked",false);fxView["machine"]["caller"](["skins","clean",a["skin"]],[a,e,t,i],a);a["run"]["clean"]++};return t});fxView["machine"]["deployer"](["material","elem","checkbox","skin","deploy"],{view:function(e,a,i,t){a["pack"].append(e["wrap"]);e["wrap"].attr({class:"layui-col-xs12 layui-col-md6"});e["wrap"].append('<div moire-key="'+e["type"]+'"></div><div moire-cell="'+e["type"]+'"></div>');e["wrap"].children("[moire-key]").html(e["label"]+e["requireMark"]);e["wrap"].children("[moire-cell]").append(e["elem"]);e["elem"].attr({class:"layui-input"})}});fxView["machine"]["deployer"](["material","elem","date","main"],function(){var e,a,i,t={};t["base"]=e={};t["dark"]=a={};t["tray"]=i={};t["init"]=function(){fxView["machine"]["darker"](a,arguments[0]);e=fxBase["param"]["merge"](e,{},isObject(arguments[1])?arguments[1]:{});a=fxBase["param"]["merge"](a,{echoSwitch:1,default:["choice",a["title"]],plugin:{type:"datetime"}},a);a["title"]=fxBase["base"]["lang"](a["title"]);a["default"]=fxBase["base"]["lang"](a["default"]);t["data"]();fxView["machine"]["caller"](["skins","init",a["skin"]],[a,e,t,i],a);a["run"]["init"]++};t["data"]=function(){fxView["machine"]["caller"](["skins","data",a["skin"]],[a,e,t,i],a);a["run"]["data"]++};t["deploy"]=function(){if(a["run"]["deploy"])return;a=fxBase["param"]["merge"](a,{wrapBox:{elem:"<div></div>",attr:{"moire-elem":"elem","moire-type":a["type"],"moire-skin":a["skin"]}},elemBox:{elem:"<input>",attr:{type:"text",id:a["id"],name:a["field"],placeholder:a["default"],autocomplete:"off"}}},a);fxView["machine"]["caller"](["before"],[a,e],a);a["wrap"]=$(a["wrapBox"]["elem"]);a["wrap"].attr(a["wrapBox"]["attr"]);a["elem"]=$(a["elemBox"]["elem"]);a["elem"].attr(a["elemBox"]["attr"]);fxView["machine"]["caller"](["skins","deploy",a["skin"]],[a,e,t,i],a);fxView["machine"]["caller"](["after"],[a,e],a);a["run"]["deploy"]++};t["done"]=function(){fxView["machine"]["caller"](["skins","done",a["skin"]],[a,e,t,i],a);fxView["machine"]["caller"](["done"],[a,e],a);a["run"]["done"]++};t["echo"]=function(){a["echo"]=a["elem"].val();fxView["machine"]["caller"](["skins","echo",a["skin"]],[a,e,t,i],a);if(a["echoSwitch"]==1&&a["require"]==1&&isBlank(a["echo"])){a["elem"].trigger("focus");layui.layer.msg(fxBase["base"]["lang"](["please","input",a["label"]]),{icon:5,anim:6});return false}a["run"]["echo"]++};t["reset"]=function(){a["elem"].val(a["data"]);fxView["machine"]["caller"](["skins","reset",a["skin"]],[a,e,t,i],a);a["run"]["reset"]++};t["clean"]=function(){a["elem"].val("");fxView["machine"]["caller"](["skins","clean",a["skin"]],[a,e,t,i],a);a["run"]["clean"]++};return t});fxView["machine"]["deployer"](["material","elem","date","skin","deploy"],{search:function(e,a,i,t){a["pack"].append(e["wrap"]);e["wrap"].attr({class:"layui-col-xs12 layui-col-sm6 layui-col-md4"});e["wrap"].append(e["elem"]);e["elem"].attr({class:"layui-input"});e["plugin"]["elem"]=e["elem"][0];layui.laydate.render(e["plugin"])},view:function(e,a,i,t){a["pack"].append(e["wrap"]);e["wrap"].attr({class:"layui-col-xs12 layui-col-md6"});e["wrap"].append('<div moire-key="'+e["type"]+'"></div><div moire-cell="'+e["type"]+'"></div>');e["wrap"].children("[moire-key]").html(e["label"]+e["requireMark"]);e["wrap"].children("[moire-cell]").append(e["elem"]);e["elem"].attr({class:"layui-input"});e["plugin"]["elem"]=e["elem"][0];e["plugin"]=layui.laydate.render(e["plugin"]);e["elem"].on("blur",function(){t["value"]=$(this).val();t["regexp"]="[^A-Za-z]+";t["format"]=fxBase["text"]["explode"](t["regexp"],e["plugin"].config.format,"regular");t["regexp"]="[A-Za-z]+";t["format_separator"]=fxBase["text"]["explode"](t["regexp"],e["plugin"].config.format,"regular").slice(1,-1);t["regexp"]="[^0-9]+";t["value"]=fxBase["text"]["explode"](t["regexp"],t["value"],"regular").slice(0,t["format"].length);$.each(t["format"],function(e,a){t["value"][e]=fxBase["text"]["strPad"](!isBlank(t["value"][e])?t["value"][e]:"0",a.length,0,0)});$.each(t["format_separator"],function(e,a){t["value"][e]=t["value"][e]+a});t["value"]=fxBase["text"]["implode"]("",t["value"]);$(this).val(t["value"])})}});fxView["machine"]["deployer"](["material","elem","dateText","main"],function(){var e,a,i,t={};t["base"]=e={};t["dark"]=a={};t["tray"]=i={};t["init"]=function(){fxView["machine"]["darker"](a,arguments[0]);e=fxBase["param"]["merge"](e,{},isObject(arguments[1])?arguments[1]:{});a=fxBase["param"]["merge"](a,{echoSwitch:0},a);a["title"]=fxBase["base"]["lang"](a["title"]);t["data"]();fxView["machine"]["caller"](["skins","init",a["skin"]],[a,e,t,i],a);a["run"]["init"]++};t["data"]=function(){a["data"]=!isBlank(a["data"])?a["data"]:"暂无时间";fxView["machine"]["caller"](["skins","data",a["skin"]],[a,e,t,i],a);a["run"]["data"]++};t["deploy"]=function(){if(a["run"]["deploy"])return;a=fxBase["param"]["merge"](a,{wrapBox:{elem:"<div></div>",attr:{"moire-elem":"elem","moire-type":a["type"],"moire-skin":a["skin"]}},elemBox:{elem:"<div></div>",attr:{id:a["id"]}}},a);fxView["machine"]["caller"](["before"],[a,e],a);a["wrap"]=$(a["wrapBox"]["elem"]);a["wrap"].attr(a["wrapBox"]["attr"]);a["elem"]=$(a["elemBox"]["elem"]);a["elem"].attr(a["elemBox"]["attr"]);fxView["machine"]["caller"](["skins","deploy",a["skin"]],[a,e,t,i],a);fxView["machine"]["caller"](["after"],[a,e],a);a["run"]["deploy"]++};t["done"]=function(){fxView["machine"]["caller"](["skins","done",a["skin"]],[a,e,t,i],a);fxView["machine"]["caller"](["done"],[a,e],a);a["run"]["done"]++};t["echo"]=function(){a["echo"]=a["elem"].text();fxView["machine"]["caller"](["skins","echo",a["skin"]],[a,e,t,i],a);a["run"]["echo"]++};t["reset"]=function(){a["elem"].text(a["data"]);fxView["machine"]["caller"](["skins","reset",a["skin"]],[a,e,t,i],a);a["run"]["reset"]++};t["clean"]=function(){fxView["machine"]["caller"](["skins","clean",a["skin"]],[a,e,t,i],a);a["run"]["clean"]++};return t});fxView["machine"]["deployer"](["material","elem","dateText","skin","deploy"],{table:function(a,e,i,t){a["templet"]=function(e){t["field"]=fxBase["text"]["explode"]("-_",a["field"]);t["data"]=e;$.each(t["field"],function(e,a){if(!isBlank(t["data"][a])){t["data"]=t["data"][a]}else{t["data"]="";return false}});a["list"].push(e);return!isBlank(t["data"])?t["data"]:"暂无时间"}},view:function(e,a,i,t){a["pack"].append(e["wrap"]);e["wrap"].attr({class:"layui-col-xs12 layui-col-md6"});e["wrap"].append('<div moire-key="'+e["type"]+'"></div><div moire-cell="'+e["type"]+'"></div>');e["wrap"].children("[moire-key]").html(e["label"]);e["wrap"].children("[moire-cell]").append(e["elem"]);e["elem"].attr({class:"moire-div"})}});fxView["machine"]["deployer"](["material","elem","file","main"],function(){var e,a,i,t={};t["base"]=e={};t["dark"]=a={};t["tray"]=i={};t["init"]=function(){fxView["machine"]["darker"](a,arguments[0]);e=fxBase["param"]["merge"](e,{},isObject(arguments[1])?arguments[1]:{});a=fxBase["param"]["merge"](a,{echoSwitch:1,default:["upload",a["title"]],alt:"",option:{type:null,panel:true},upload:{url:null,switch:true},delete:{url:null,switch:true,elem:"",text:["delete"]}},a);a["title"]=fxBase["base"]["lang"](a["title"]);a["default"]=fxBase["base"]["lang"](a["default"]);a["delete"]["text"]=fxBase["base"]["lang"](a["delete"]["text"]);t["data"]();fxView["machine"]["caller"](["skins","init",a["skin"]],[a,e,t,i],a);a["run"]["init"]++};t["data"]=function(){if(isBlank(a["data"])){a["data"]=[]}else if(!isArray(a["data"])&&!isObject(a["data"])){a["data"]=fxBase["text"]["explode"](",",a["data"])}fxView["machine"]["caller"](["skins","data",a["skin"]],[a,e,t,i],a);a["run"]["data"]++};t["deploy"]=function(){if(a["run"]["deploy"])return;a=fxBase["param"]["merge"](a,{wrapBox:{elem:"<div></div>",attr:{"moire-elem":"elem","moire-type":a["type"],"moire-skin":a["skin"]}},elemBox:{elem:'<div><div class="moire-elem-inline"></div></div>',attr:{id:a["id"]}}},a);fxView["machine"]["caller"](["before"],[a,e],a);a["wrap"]=$(a["wrapBox"]["elem"]);a["wrap"].attr(a["wrapBox"]["attr"]);a["elem"]=$(a["elemBox"]["elem"]);a["elem"].attr(a["elemBox"]["attr"]);fxView["machine"]["caller"](["skins","deploy",a["skin"]],[a,e,t,i],a);fxView["machine"]["caller"](["after"],[a,e],a);a["run"]["deploy"]++};t["done"]=function(){fxView["machine"]["caller"](["skins","done",a["skin"]],[a,e,t,i],a);fxView["machine"]["caller"](["done"],[a,e],a);a["run"]["done"]++};t["echo"]=function(){if(!a["upload"]["switch"]&&!a["delete"]["switch"])return true;fxView["machine"]["caller"](["skins","echo",a["skin"]],[a,e,t,i],a);if(a["echoSwitch"]==1&&a["require"]==1&&isBlank(a["echo"])){a["elem"].find(".moire-operate").trigger("click");layui.layer.msg(fxBase["base"]["lang"](["please","upload",a["label"]]),{icon:5,anim:6});return false}a["run"]["echo"]++};t["reset"]=function(){fxView["machine"]["caller"](["skins","reset",a["skin"]],[a,e,t,i],a);a["run"]["reset"]++};t["clean"]=function(){fxView["machine"]["caller"](["skins","clean",a["skin"]],[a,e,t,i],a);a["run"]["clean"]++};return t});fxView["machine"]["deployer"](["material","elem","file","skin","deploy"],{table:function(a,e,i,t){a["templet"]=function(e){t["field"]=fxBase["text"]["explode"]("-_",a["field"]);t["data"]=e;$.each(t["field"],function(e,a){if(!isBlank(t["data"][a])){t["data"]=t["data"][a]}else{t["data"]="";return false}});a["list"].push(e);t["echo"]="";switch(a["option"]["type"]){default:case"file":case"video":case"image":if(!isBlank(t["data"])){t["echo"]=$("<img>");t["echo"].attr({src:t["data"],title:a["title"],style:"width: 100%;height: 100%"});t["echo"]=t["echo"].prop("outerHTML")}break}return t["echo"]}},view:function(l,e,a,t){e["pack"].append(l["wrap"]);l["wrap"].attr({class:"layui-col-xs12 layui-col-md6"});l["wrap"].append('<div moire-key="'+l["type"]+'"></div><div moire-cell="'+l["type"]+'"></div>');l["wrap"].children("[moire-key]").html(l["label"]+l["requireMark"]);l["wrap"].children("[moire-cell]").append(l["elem"]);l["elem"].attr({class:"moire-div"});if(l["delete"]["switch"]){l["delete"]["elem"]='<button class="layui-btn layui-btn-sm layui-btn-danger moire-bg-red-light moire-delete" type="button">'+l["delete"]["text"]+"</button>";l["elem"].parents("div[moire-cell]").on("click",".moire-delete",function(){var a={};a["elem"]=$(this).parents(".moire-elem-inline>div");a["message"]=fxBase["base"]["lang"](["是否删除","[",l["title"],"]","项目","[",a["elem"].index()+1,"]","？"]);a["config"]={title:null,icon:0,closeBtn:0,shadeClose:true,success:function(e,a){t["layer.index"]=fxBase["text"]["implode"]("-",[$(e[0]).attr("times"),fxApp["rank"]["self.code"],"layui"]);fxApp["rank"]["self.layer.index.set"](t["layer.index"])},end:function(){fxApp["rank"]["self.layer.index.destroy"](t["layer.index"])}};layui.layer.confirm(a["message"],a["config"],function(e){a["data"]=fxBase["text"]["explode"](",",$("input[name="+l["field"]+"]").val());l["elem"].find(".moire-elem-inline").masonry("destroy",a["elem"]);a["data"].splice(a["elem"].index(),1);$("input[name="+l["field"]+"]").val(fxBase["text"]["implode"](",",a["data"]));a["elem"].remove();l["event"]["masonry"]();fxApp["rank"]["self.layer.index.destroy"](t["layer.index"]);layui.layer.close(e)})})}if(l["upload"]["switch"]){l["elem"].append('<div class="moire-elem-operate">'+'<button type="button" class="layui-btn moire-operate">'+'<i class="layui-icon">&#xe67c;</i>'+fxBase["base"]["lang"](l["default"])+"</button>"+'<input type="hidden" class="moire-operate-hidden"></div>');l["elem"].find(".moire-operate").on("click",function(){if(!l["option"]["panel"]){l["elem"].find(".moire-operate-hidden").trigger("click");return false}layui.layer.prompt({title:"地址",btn:["保存","本地上传"],btn2:function(e,a){l["elem"].find(".moire-operate-hidden").trigger("click")},shadeClose:true,success:function(e,a){t["layer.index"]=fxBase["text"]["implode"]("-",[$(e[0]).attr("times"),fxApp["rank"]["self.code"],"layui"]);fxApp["rank"]["self.layer.index.set"](t["layer.index"])},end:function(){fxApp["rank"]["self.layer.index.destroy"](t["layer.index"])}},function(e,a,i){r({code:200,message:fxBase["base"]["lang"](["save","success"]),data:[e]});fxApp["rank"]["self.layer.index.destroy"](t["layer.index"]);layui.layer.close(a)})});l["upload"]=fxBase["param"]["merge"](l["upload"],{elem:l["elem"].find(".moire-operate-hidden"),data:{base:{token:fxApp["user"]["base"]["token"],format:"json"}},choose:i,before:n,done:r,error:o},l["upload"]);function i(e){}function n(e){fxApp["rank"]["file.load"]=layui.layer.load(2)}function r(e,a,i){var t={};l["elem"].find(".moire-elem-operate input").val("");layui.layer.close(fxApp["rank"]["file.load"]);t["data"]=fxBase["text"]["explode"](",",$("input[name="+l["field"]+"]").val());if(e["code"]==-1){e["message"]=fxBase["base"]["lang"](["system","abend"])}if(e["code"]==200){$.each(e["data"],function(e,a){t["data"].push(a);switch(l["option"]["type"]){default:case"file":case"video":l["elem"].find(".moire-elem-inline").append('<div><a href="'+a+'" target="_blank">点击链接</a>'+l["delete"]["elem"]+"</div>");break;case"image":l["elem"].find(".moire-elem-inline").append('<div><img src="'+a+'"'+l["alt"]+">"+l["delete"]["elem"]+"</div>");break}});t["list"]=[];$.each(t["data"],function(e,a){if(isBlank(a))return true;t["list"].push(a)});$("input[name="+l["field"]+"]").val(fxBase["text"]["implode"](",",t["list"]));layui.layer.msg(e["message"],{icon:1,time:800});l["elem"].find(".moire-elem-inline").masonry("appended",l["elem"].find(".moire-elem-inline>div:last"));l["elem"].find(".moire-elem-inline").imagesLoaded(function(){l["event"]["masonry"]()})}else{layui.layer.msg(e["message"],{icon:2,time:2e3})}l["elem"].parents("div[moire-cell]").viewer("update")}function o(e,a){layui.layer.close(fxApp["rank"]["file.load"])}layui.upload.render(l["upload"])}l["event"]["masonry"]=function(){l["elem"].find(".moire-elem-inline").masonry({itemSelector:"div"})};l["event"]["masonry"]()},view_alioss:function(l,e,a,n){e["pack"].append(l["wrap"]);l["wrap"].attr({class:"layui-col-xs12 layui-col-md6"});l["wrap"].append('<div moire-key="'+l["type"]+'"></div><div moire-cell="'+l["type"]+'"></div>');l["wrap"].children("[moire-key]").html(l["label"]+l["requireMark"]);l["wrap"].children("[moire-cell]").append(l["elem"]);l["elem"].attr({class:"moire-div"});if(l["delete"]["switch"]){l["delete"]["elem"]='<button class="layui-btn layui-btn-sm layui-btn-danger moire-bg-red-light moire-delete" type="button">'+l["delete"]["text"]+"</button>";l["elem"].parents("div[moire-cell]").on("click",".moire-delete",function(){var a={};a["elem"]=$(this).parents(".moire-elem-inline>div");a["message"]=fxBase["base"]["lang"](["是否删除","[",l["title"],"]","项目","[",a["elem"].index()+1,"]","？"]);a["config"]={title:null,icon:0,closeBtn:0,shadeClose:true,success:function(e,a){n["layer.index"]=fxBase["text"]["implode"]("-",[$(e[0]).attr("times"),fxApp["rank"]["self.code"],"layui"]);fxApp["rank"]["self.layer.index.set"](n["layer.index"])},end:function(){fxApp["rank"]["self.layer.index.destroy"](n["layer.index"])}};layui.layer.confirm(a["message"],a["config"],function(e){a["data"]=fxBase["text"]["explode"](",",$("input[name="+l["field"]+"]").val());l["elem"].find(".moire-elem-inline").masonry("destroy",a["elem"]);a["data"].splice(a["elem"].index(),1);$("input[name="+l["field"]+"]").val(fxBase["text"]["implode"](",",a["data"]));a["elem"].remove();l["event"]["masonry"]();fxApp["rank"]["self.layer.index.destroy"](n["layer.index"]);layui.layer.close(e)})})}if(l["upload"]["switch"]){l["elem"].append('<div class="moire-elem-operate">'+'<button type="button" class="layui-btn moire-operate">'+'<i class="layui-icon">&#xe67c;</i>'+fxBase["base"]["lang"](l["default"])+"</button>"+'<input type="hidden" class="moire-operate-hidden"></div>');l["elem"].find(".moire-operate").on("click",function(){if(!l["option"]["panel"]){n["message"]=["upload","success"];l["elem"].find(".moire-operate-hidden").trigger("click");return false}layui.layer.prompt({title:"地址",btn:["保存","本地上传"],btn2:function(e,a){n["message"]=["upload","success"];l["elem"].find(".moire-operate-hidden").trigger("click")},shadeClose:true,success:function(e,a){n["layer.index"]=fxBase["text"]["implode"]("-",[$(e[0]).attr("times"),fxApp["rank"]["self.code"],"layui"]);fxApp["rank"]["self.layer.index.set"](n["layer.index"])},end:function(){fxApp["rank"]["self.layer.index.destroy"](n["layer.index"])}},function(e,a,i){n["message"]=["save","success"];t([{ossUrl:e}]);fxApp["rank"]["self.layer.index.destroy"](n["layer.index"]);layui.layer.close(a)})});l["upload"]=fxBase["param"]["merge"](l["upload"],{elm:l["elem"].find(".moire-operate-hidden"),fileType:l["option"]["type"],multiple:false,layerArea:["600px","300px"],layerTitle:"上传文件",policyUrl:"/v0/file/aliossSign",policyData:{base:{token:fxApp["user"]["base"]["token"],format:"json"},data:{}},policyHeader:{Authorization:layui.data("XCORS").Authorization},codeFiled:"code",codeStatus:200,policyMethod:"get",accessidFiled:"accessid",policyFiled:"policy",signatureFiled:"signature",httpStr:"https",region:"oss-cn-hangzhou",bucket:"zzd-longwan",prefixPath:"moire/",allUploaded:t,policyFailed:i,uploadRenderData:{}},l["upload"]);function t(e,a,i){var t={};l["elem"].find(".moire-elem-operate input").val("");t["data"]=fxBase["text"]["explode"](",",$("input[name="+l["field"]+"]").val());$.each(e,function(e,a){t["data"].push(a["ossUrl"]);switch(l["option"]["type"]){default:case"file":case"video":l["elem"].find(".moire-elem-inline").append('<div><a href="'+a["ossUrl"]+'" target="_blank">点击链接</a>'+l["delete"]["elem"]+"</div>");break;case"image":l["elem"].find(".moire-elem-inline").append('<div><img src="'+a["ossUrl"]+'"'+l["alt"]+">"+l["delete"]["elem"]+"</div>");break}});t["list"]=[];$.each(t["data"],function(e,a){if(isBlank(a))return true;t["list"].push(a)});$("input[name="+l["field"]+"]").val(fxBase["text"]["implode"](",",t["list"]));layui.layer.msg(fxBase["base"]["lang"](n["message"]),{icon:1,time:800});l["elem"].find(".moire-elem-inline").masonry("appended",l["elem"].find(".moire-elem-inline>div:last"));l["elem"].find(".moire-elem-inline").imagesLoaded(function(){l["event"]["masonry"]()});l["elem"].parents("div[moire-cell]").viewer("update")}function i(e,a){}layui.aliossUploader.render(l["upload"])}l["event"]["masonry"]=function(){l["elem"].find(".moire-elem-inline").masonry({itemSelector:"div"})};l["event"]["masonry"]()}});fxView["machine"]["deployer"](["material","elem","file","skin","echo"],{"view,view_alioss":function(i,e,a,t){i["echo"]=[];i["elem"].find(".moire-elem-inline>div").each(function(e,a){switch(i["option"]["type"]){default:case"video":i["echo"].push($(a).find("a").attr("href"));break;case"image":i["echo"].push($(a).find("img").attr("src"));break}});i["echo"]=fxBase["text"]["implode"](",",i["echo"])}});fxView["machine"]["deployer"](["material","elem","file","skin","reset"],{"view,view_alioss":function(i,e,a,t){$.each(i["upload"]["data"],function(e,a){i["upload"]["data"][e]=JSON.stringify(a)});i["elem"].find(".moire-elem-inline").masonry("destroy",i["elem"].find(".moire-elem-inline>div"));i["elem"].find(".moire-elem-inline>div").remove();$.each(i["data"],function(e,a){switch(i["option"]["type"]){default:case"file":case"video":i["elem"].find(".moire-elem-inline").append('<div><a href="'+a+'" target="_blank">点击链接</a>'+i["delete"]["elem"]+"</div>");break;case"image":i["elem"].find(".moire-elem-inline").append('<div><img src="'+a+'"'+i["alt"]+">"+i["delete"]["elem"]+"</div>");break}});i["elem"].find(".moire-elem-inline").imagesLoaded(function(){i["event"]["masonry"]()});i["event"]["masonry"]();i["elem"].parents("div[moire-cell]").viewer("update")}});fxView["machine"]["deployer"](["material","elem","file","skin","clean"],{"view,view_alioss":function(e,a,i,t){e["elem"].find(".moire-elem-inline>div").remove();e["event"]["masonry"]()}});fxView["machine"]["deployer"](["material","elem","hidden","main"],function(){var e,a,i,t={};t["base"]=e={};t["dark"]=a={};t["tray"]=i={};t["init"]=function(){fxView["machine"]["darker"](a,arguments[0]);e=fxBase["param"]["merge"](e,{},isObject(arguments[1])?arguments[1]:{});a=fxBase["param"]["merge"](a,{echoSwitch:1},a);a["title"]=fxBase["base"]["lang"](a["title"]);t["data"]();fxView["machine"]["caller"](["skins","init",a["skin"]],[a,e,t,i],a);a["run"]["init"]++};t["data"]=function(){if(isArray(a["data"])){a["data"]=fxBase["text"]["implode"](",",a["data"])}else if(isObject(a["data"])){a["data"]=fxBase["text"]["implode"](",",Object.values(a["data"]))}fxView["machine"]["caller"](["skins","data",a["skin"]],[a,e,t,i],a);a["run"]["data"]++};t["deploy"]=function(){if(a["run"]["deploy"])return;a=fxBase["param"]["merge"](a,{elemBox:{elem:"<input>",attr:{type:"hidden",id:a["id"],name:a["field"]}}},a);fxView["machine"]["caller"](["before"],[a,e],a);a["elem"]=$(a["elemBox"]["elem"]);a["elem"].attr(a["elemBox"]["attr"]);fxView["machine"]["caller"](["skins","deploy",a["skin"]],[a,e,t,i],a);fxView["machine"]["caller"](["after"],[a,e],a);a["run"]["deploy"]++};t["done"]=function(){fxView["machine"]["caller"](["skins","done",a["skin"]],[a,e,t,i],a);fxView["machine"]["caller"](["done"],[a,e],a);a["run"]["done"]++};t["echo"]=function(){a["echo"]=a["elem"].val();fxView["machine"]["caller"](["skins","echo",a["skin"]],[a,e,t,i],a);if(a["echoSwitch"]==1&&a["require"]==1&&isBlank(a["echo"])){layui.layer.msg(fxBase["base"]["lang"](["please","input",a["label"]]),{icon:5,anim:6});return false}a["run"]["echo"]++};t["reset"]=function(){a["elem"].val(a["data"]);fxView["machine"]["caller"](["skins","reset",a["skin"]],[a,e,t,i],a);a["run"]["reset"]++};t["clean"]=function(){a["elem"].val("");fxView["machine"]["caller"](["skins","clean",a["skin"]],[a,e,t,i],a);a["run"]["clean"]++};return t});fxView["machine"]["deployer"](["material","elem","hidden","skin","deploy"],{"search,view":function(e,a,i,t){a["pack"].append(e["elem"])}});fxView["machine"]["deployer"](["material","elem","html","main"],function(){var e,a,i,t={};t["base"]=e={};t["dark"]=a={};t["tray"]=i={};t["init"]=function(){fxView["machine"]["darker"](a,arguments[0]);e=fxBase["param"]["merge"](e,{},isObject(arguments[1])?arguments[1]:{});a=fxBase["param"]["merge"](a,{echoSwitch:0},a);a["title"]=fxBase["base"]["lang"](a["title"]);t["data"]();fxView["machine"]["caller"](["skins","init",a["skin"]],[a,e,t,i],a);a["run"]["init"]++};t["data"]=function(){fxView["machine"]["caller"](["skins","data",a["skin"]],[a,e,t,i],a);a["run"]["data"]++};t["deploy"]=function(){if(a["run"]["deploy"])return;a=fxBase["param"]["merge"](a,{wrapBox:{elem:"<div></div>",attr:{"moire-elem":"elem","moire-type":a["type"],"moire-skin":a["skin"]}},elemBox:{elem:"<div></div>",attr:{id:a["id"]}}},a);fxView["machine"]["caller"](["before"],[a,e],a);a["wrap"]=$(a["wrapBox"]["elem"]);a["wrap"].attr(a["wrapBox"]["attr"]);a["elem"]=$(a["elemBox"]["elem"]);a["elem"].attr(a["elemBox"]["attr"]);fxView["machine"]["caller"](["skins","deploy",a["skin"]],[a,e,t,i],a);fxView["machine"]["caller"](["after"],[a,e],a);a["run"]["deploy"]++};t["done"]=function(){fxView["machine"]["caller"](["skins","done",a["skin"]],[a,e,t,i],a);fxView["machine"]["caller"](["done"],[a,e],a);a["run"]["done"]++};t["echo"]=function(){a["echo"]=a["elem"].html();fxView["machine"]["caller"](["skins","echo",a["skin"]],[a,e,t,i],a);a["run"]["echo"]++};t["reset"]=function(){a["elem"].html(a["data"]);fxView["machine"]["caller"](["skins","reset",a["skin"]],[a,e,t,i],a);a["run"]["reset"]++};t["clean"]=function(){fxView["machine"]["caller"](["skins","clean",a["skin"]],[a,e,t,i],a);a["run"]["clean"]++};return t});fxView["machine"]["deployer"](["material","elem","html","skin","deploy"],{view:function(e,a,i,t){a["pack"].append(e["wrap"]);e["wrap"].attr({class:"layui-col-xs12 layui-col-md6"});e["wrap"].append('<div moire-key="'+e["type"]+'"></div><div moire-cell="'+e["type"]+'"></div>');e["wrap"].children("[moire-key]").html(e["label"]);e["wrap"].children("[moire-cell]").append(e["elem"]);e["elem"].attr({class:"moire-div"})}});fxView["machine"]["deployer"](["material","elem","input","main"],function(){var e,a,i,t={};t["base"]=e={};t["dark"]=a={};t["tray"]=i={};t["init"]=function(){fxView["machine"]["darker"](a,arguments[0]);e=fxBase["param"]["merge"](e,{},isObject(arguments[1])?arguments[1]:{});a=fxBase["param"]["merge"](a,{echoSwitch:1,default:["input",a["title"]]},a);a["title"]=fxBase["base"]["lang"](a["title"]);a["default"]=fxBase["base"]["lang"](a["default"]);t["data"]();fxView["machine"]["caller"](["skins","init",a["skin"]],[a,e,t,i],a);a["run"]["init"]++};t["data"]=function(){fxView["machine"]["caller"](["skins","data",a["skin"]],[a,e,t,i],a);a["run"]["data"]++};t["deploy"]=function(){if(a["run"]["deploy"])return;a=fxBase["param"]["merge"](a,{wrapBox:{elem:"<div></div>",attr:{"moire-elem":"elem","moire-type":a["type"],"moire-skin":a["skin"]}},elemBox:{elem:"<input>",attr:{type:"text",id:a["id"],name:a["field"],placeholder:a["default"],autocomplete:"off"}}},a);fxView["machine"]["caller"](["before"],[a,e],a);a["wrap"]=$(a["wrapBox"]["elem"]);a["wrap"].attr(a["wrapBox"]["attr"]);a["elem"]=$(a["elemBox"]["elem"]);a["elem"].attr(a["elemBox"]["attr"]);fxView["machine"]["caller"](["skins","deploy",a["skin"]],[a,e,t,i],a);fxView["machine"]["caller"](["after"],[a,e],a);a["run"]["deploy"]++};t["done"]=function(){fxView["machine"]["caller"](["skins","done",a["skin"]],[a,e,t,i],a);fxView["machine"]["caller"](["done"],[a,e],a);a["run"]["done"]++};t["echo"]=function(){a["echo"]=a["elem"].val();fxView["machine"]["caller"](["skins","echo",a["skin"]],[a,e,t,i],a);if(a["echoSwitch"]==1&&a["require"]==1&&isBlank(a["echo"])){a["elem"].trigger("focus");layui.layer.msg(fxBase["base"]["lang"](["please","input",a["label"]]),{icon:5,anim:6});return false}a["run"]["echo"]++};t["reset"]=function(){a["elem"].val(a["data"]);fxView["machine"]["caller"](["skins","reset",a["skin"]],[a,e,t,i],a);a["run"]["reset"]++};t["clean"]=function(){a["elem"].val("");fxView["machine"]["caller"](["skins","clean",a["skin"]],[a,e,t,i],a);a["run"]["clean"]++};return t});fxView["machine"]["deployer"](["material","elem","input","skin","deploy"],{search:function(e,a,i,t){a["pack"].append(e["wrap"]);e["wrap"].attr({class:"layui-col-xs6 layui-col-sm3 layui-col-md2"});e["wrap"].append(e["elem"]);e["elem"].attr({class:"layui-input"})},view:function(e,a,i,t){a["pack"].append(e["wrap"]);e["wrap"].attr({class:"layui-col-xs12 layui-col-md6"});e["wrap"].append('<div moire-key="'+e["type"]+'"></div><div moire-cell="'+e["type"]+'"></div>');e["wrap"].children("[moire-key]").html(e["label"]+e["requireMark"]);e["wrap"].children("[moire-cell]").append(e["elem"]);e["elem"].attr({class:"layui-input"})}});fxView["machine"]["deployer"](["material","elem","password","main"],function(){var e,a,i,t={};t["base"]=e={};t["dark"]=a={};t["tray"]=i={};t["init"]=function(){fxView["machine"]["darker"](a,arguments[0]);e=fxBase["param"]["merge"](e,{},isObject(arguments[1])?arguments[1]:{});a=fxBase["param"]["merge"](a,{echoSwitch:1,default:["input",a["title"]]},a);a["title"]=fxBase["base"]["lang"](a["title"]);a["default"]=fxBase["base"]["lang"](a["default"]);t["data"]();fxView["machine"]["caller"](["skins","init",a["skin"]],[a,e,t,i],a);a["run"]["init"]++};t["data"]=function(){fxView["machine"]["caller"](["skins","data",a["skin"]],[a,e,t,i],a);a["run"]["data"]++};t["deploy"]=function(){if(a["run"]["deploy"])return;a=fxBase["param"]["merge"](a,{wrapBox:{elem:"<div></div>",attr:{"moire-elem":"elem","moire-type":a["type"],"moire-skin":a["skin"]}},elemBox:{elem:"<input>",attr:{type:"password",id:a["id"],name:a["field"],placeholder:a["default"],autocomplete:"off"}}},a);fxView["machine"]["caller"](["before"],[a,e],a);a["wrap"]=$(a["wrapBox"]["elem"]);a["wrap"].attr(a["wrapBox"]["attr"]);a["elem"]=$(a["elemBox"]["elem"]);a["elem"].attr(a["elemBox"]["attr"]);fxView["machine"]["caller"](["skins","deploy",a["skin"]],[a,e,t,i],a);fxView["machine"]["caller"](["after"],[a,e],a);a["run"]["deploy"]++};t["done"]=function(){fxView["machine"]["caller"](["skins","done",a["skin"]],[a,e,t,i],a);fxView["machine"]["caller"](["done"],[a,e],a);a["run"]["done"]++};t["echo"]=function(){a["echo"]=a["elem"].val();fxView["machine"]["caller"](["skins","echo",a["skin"]],[a,e,t,i],a);if(a["echoSwitch"]==1&&a["require"]==1&&isBlank(a["echo"])){a["elem"].trigger("focus");layui.layer.msg(fxBase["base"]["lang"](["please","input",a["label"]]),{icon:5,anim:6});return false}a["run"]["echo"]++};t["reset"]=function(){a["elem"].val(a["data"]);fxView["machine"]["caller"](["skins","reset",a["skin"]],[a,e,t,i],a);a["run"]["reset"]++};t["clean"]=function(){a["elem"].val("");fxView["machine"]["caller"](["skins","clean",a["skin"]],[a,e,t,i],a);a["run"]["clean"]++};return t});fxView["machine"]["deployer"](["material","elem","password","skin","deploy"],{view:function(e,a,i,t){a["pack"].append(e["wrap"]);e["wrap"].attr({class:"layui-col-xs12 layui-col-md6"});e["wrap"].append('<div moire-key="'+e["type"]+'"></div><div moire-cell="'+e["type"]+'"></div>');e["wrap"].children("[moire-key]").html(e["label"]+e["requireMark"]);e["wrap"].children("[moire-cell]").append(e["elem"]);e["elem"].attr({class:"layui-input"})}});fxView["machine"]["deployer"](["material","elem","richtext","main"],function(){var e,a,i,t={};t["base"]=e={};t["dark"]=a={};t["tray"]=i={};t["init"]=function(){fxView["machine"]["darker"](a,arguments[0]);e=fxBase["param"]["merge"](e,{},isObject(arguments[1])?arguments[1]:{});a=fxBase["param"]["merge"](a,{echoSwitch:1,default:["input",a["title"]],plugin:{lang:fxApp["view"]["lang"]}},a);a["title"]=fxBase["base"]["lang"](a["title"]);a["default"]=fxBase["base"]["lang"](a["default"]);t["data"]();fxView["machine"]["caller"](["skins","init",a["skin"]],[a,e,t,i],a);a["run"]["init"]++};t["data"]=function(){fxView["machine"]["caller"](["skins","data",a["skin"]],[a,e,t,i],a);a["run"]["data"]++};t["deploy"]=function(){if(a["run"]["deploy"])return;a=fxBase["param"]["merge"](a,{wrapBox:{elem:"<div></div>",attr:{"moire-elem":"elem","moire-type":a["type"],"moire-skin":a["skin"]}},elemBox:{elem:"<textarea></textarea>",attr:{type:"text",id:a["id"],name:a["field"],placeholder:a["default"],autocomplete:"off"}}},a);fxView["machine"]["caller"](["before"],[a,e],a);a["wrap"]=$(a["wrapBox"]["elem"]);a["wrap"].attr(a["wrapBox"]["attr"]);a["elem"]=$(a["elemBox"]["elem"]);a["elem"].attr(a["elemBox"]["attr"]);fxView["machine"]["caller"](["skins","deploy",a["skin"]],[a,e,t,i],a);fxView["machine"]["caller"](["after"],[a,e],a);a["run"]["deploy"]++};t["done"]=function(){fxView["machine"]["caller"](["skins","done",a["skin"]],[a,e,t,i],a);fxView["machine"]["caller"](["done"],[a,e],a);a["run"]["done"]++};t["echo"]=function(){if(fxBase["param"]["inArray"](fxApp["env"]["ie"],[-1,11])){a["echo"]=tinymce.get(a["id"]).getContent();a["elem"].val(a["echo"])}else{a["echo"]=a["elem"].val()}fxView["machine"]["caller"](["skins","echo",a["skin"]],[a,e,t,i],a);if(a["echoSwitch"]==1&&a["require"]==1&&isBlank(a["echo"])){if(fxBase["param"]["inArray"](fxApp["env"]["ie"],[-1,11])){tinymce.get(a["id"]).focus()}else{a["elem"].trigger("focus")}layui.layer.msg(fxBase["base"]["lang"](["please","input",a["label"]]),{icon:5,anim:6});return false}a["run"]["echo"]++};t["reset"]=function(){$(document).ready(function(){if(fxBase["param"]["inArray"](fxApp["env"]["ie"],[-1,11])){tinymce.get(a["id"]).setContent(a["data"])}a["elem"].val(a["data"]);fxView["machine"]["caller"](["skins","reset",a["skin"]],[a,e,t,i],a)});a["run"]["reset"]++};t["clean"]=function(){$(document).ready(function(){if(fxBase["param"]["inArray"](fxApp["env"]["ie"],[-1,11])){tinymce.get(a["id"]).setContent("")}a["elem"].val("");fxView["machine"]["caller"](["skins","clean",a["skin"]],[a,e,t,i],a)});a["run"]["clean"]++};return t});fxView["machine"]["deployer"](["material","elem","richtext","skin","deploy"],{view:function(e,a,i,t){a["pack"].append(e["wrap"]);e["wrap"].attr({class:"layui-col-xs12 layui-col-md6"});e["wrap"].append('<div moire-key="'+e["type"]+'"></div><div moire-cell="'+e["type"]+'"></div>');e["wrap"].children("[moire-key]").html(e["label"]+e["requireMark"]);e["wrap"].children("[moire-cell]").append(e["elem"]);e["elem"].attr({class:"layui-textarea"});if(fxBase["param"]["inArray"](fxApp["env"]["ie"],[-1,11])){var i={};switch(e["plugin"]["lang"]){default:case"zh-cn":i["lang"]="zh_CN";break;case"en-us":i["lang"]="en_US";break}tinymce.init({selector:"#"+e["id"],language:i["lang"],mobile:{toolbar_drawer:false},plugins:"print preview searchreplace autolink directionality visualblocks visualchars fullscreen image link media template code codesample table charmap hr pagebreak nonbreaking anchor insertdatetime advlist lists wordcount imagetools textpattern help emoticons autosave bdmap indent2em lineheight axupimgs",toolbar:["code undo redo restoredraft | cut copy paste pastetext | forecolor backcolor bold italic underline strikethrough link anchor | alignleft aligncenter alignright alignjustify outdent indent | "+"styleselect formatselect fontselect fontsizeselect | bullist numlist | blockquote subscript superscript removeformat | "+"table image media charmap emoticons hr pagebreak insertdatetime print preview | fullscreen | bdmap indent2em lineheight axupimgs"],height:600,resize:false,fontsize_formats:"12px 14px 16px 18px 24px 36px 48px 56px 72px",font_formats:"微软雅黑=Microsoft YaHei,Helvetica Neue,PingFang SC,sans-serif;苹果苹方=PingFang SC,Microsoft YaHei,sans-serif;宋体=simsun,serif;仿宋体=FangSong,serif;黑体=SimHei,sans-serif;Arial=arial,helvetica,sans-serif;Arial Black=arial black,avant garde;Book Antiqua=book antiqua,palatino;",images_upload_handler:function(e,a,i){var t=new FormData;var l=e.blob();t.append("base[token]",fxApp["user"]["base"]["token"]);t.append("file",l,l.name);$.ajax({type:"POST",url:"/v0/file/fileUpload",data:t,processData:false,contentType:false,success:n,error:r});function n(e){if(e["code"]==200){a(e["data"][0])}else{i(e["message"])}}function r(e){i(e["responseText"])}},autosave_ask_before_unload:false,init_instance_callback:function(e){}})}}});fxView["machine"]["deployer"](["material","elem","select","main"],function(){var e,i,a,t={};t["base"]=e={};t["dark"]=i={};t["tray"]=a={};t["init"]=function(){fxView["machine"]["darker"](i,arguments[0]);e=fxBase["param"]["merge"](e,{},isObject(arguments[1])?arguments[1]:{});i=fxBase["param"]["merge"](i,{echoSwitch:1,default:["choice",i["title"]],defaultValue:0},i);i["title"]=fxBase["base"]["lang"](i["title"]);i["default"]=fxBase["base"]["lang"](i["default"]);t["data"]();fxView["machine"]["caller"](["skins","init",i["skin"]],[i,e,t,a],i);i["run"]["init"]++};t["data"]=function(){if(isBlank(i["shelf"]["data"])){i["shelf"]["data"]={}}else if(!isArray(i["shelf"]["data"])&&!isObject(i["shelf"]["data"])){i["shelf"]["data"]=fxBase["text"]["explode"](",",i["shelf"]["data"])}fxView["machine"]["caller"](["skins","data",i["skin"]],[i,e,t,a],i);i["run"]["data"]++};t["deploy"]=function(){if(i["run"]["deploy"])return;i=fxBase["param"]["merge"](i,{wrapBox:{elem:"<div></div>",attr:{"moire-elem":"elem","moire-type":i["type"],"moire-skin":i["skin"]}},elemBox:{elem:"<select></select>",attr:{id:i["id"],name:i["field"]}}},i);fxView["machine"]["caller"](["before"],[i,e],i);i["wrap"]=$(i["wrapBox"]["elem"]);i["wrap"].attr(i["wrapBox"]["attr"]);i["elem"]=$(i["elemBox"]["elem"]);i["elem"].attr(i["elemBox"]["attr"]);i["elem"].append('<option value="">'+i["default"]+"</option>");$.each(i["shelf"]["data"],function(e,a){i["elem"].append('<option value="'+e+'">'+a+"</option>")});fxView["machine"]["caller"](["skins","deploy",i["skin"]],[i,e,t,a],i);fxView["machine"]["caller"](["after"],[i,e],i);i["run"]["deploy"]++};t["done"]=function(){fxView["machine"]["caller"](["skins","done",i["skin"]],[i,e,t,a],i);fxView["machine"]["caller"](["done"],[i,e],i);i["run"]["done"]++};t["echo"]=function(){i["echo"]=i["elem"].val();fxView["machine"]["caller"](["skins","echo",i["skin"]],[i,e,t,a],i);if(i["echoSwitch"]==1&&i["require"]==1&&isBlank(i["echo"])){i["elem"].parents("[moire-cell]").find("input").trigger("click");layui.layer.msg(fxBase["base"]["lang"](["please","choice",i["label"]]),{icon:5,anim:6});return false}i["run"]["echo"]++};t["reset"]=function(){i["elem"].val(i["data"]);i["elem"].next().find("input").val(i["elem"].find("option:selected").html());fxView["machine"]["caller"](["skins","reset",i["skin"]],[i,e,t,a],i);i["run"]["reset"]++};t["clean"]=function(){i["elem"].val("");fxView["machine"]["caller"](["skins","clean",i["skin"]],[i,e,t,a],i);i["run"]["clean"]++};return t});fxView["machine"]["deployer"](["material","elem","select","skin","deploy"],{search:function(e,a,i,t){a["pack"].append(e["wrap"]);e["wrap"].attr({class:"layui-col-xs6 layui-col-sm3 layui-col-md2"});e["wrap"].append(e["elem"])},view:function(e,a,i,t){a["pack"].append(e["wrap"]);e["wrap"].attr({class:"layui-col-xs12 layui-col-md6"});e["wrap"].append('<div moire-key="'+e["type"]+'"></div><div moire-cell="'+e["type"]+'"></div>');e["wrap"].children("[moire-key]").html(e["label"]+e["requireMark"]);e["wrap"].children("[moire-cell]").append(e["elem"])}});fxView["machine"]["deployer"](["material","elem","select","skin","echo"],{view:function(e,a,i,t){e["echo"]=e["require"]==1||!isBlank(e["echo"])?e["echo"]:e["defaultValue"]}});fxView["machine"]["deployer"](["material","elem","selected","main"],function(){var e,a,t,i={};i["base"]=e={};i["dark"]=a={};i["tray"]=t={};i["init"]=function(){fxView["machine"]["darker"](a,arguments[0]);e=fxBase["param"]["merge"](e,{},isObject(arguments[1])?arguments[1]:{});a=fxBase["param"]["merge"](a,{echoSwitch:0,option:{url:null,param:function(e,a){var i={data:{}};t["field"]=fxBase["text"]["explode"]("-_",e);t["data"]=a;$.each(t["field"],function(e,a){if(!isBlank(t["data"][a])){t["data"]=t["data"][a]}else{t["data"]="";return false}});i["data"][e]=t["data"];return i},class:a["id"]+"-elem"}},a);a["title"]=fxBase["base"]["lang"](a["title"]);i["data"]();fxView["machine"]["caller"](["skins","init",a["skin"]],[a,e,i,t],a);a["run"]["init"]++};i["data"]=function(){if(isBlank(a["shelf"]["data"])){a["shelf"]["data"]={}}else if(!isArray(a["shelf"]["data"])&&!isObject(a["shelf"]["data"])){a["shelf"]["data"]=fxBase["text"]["explode"](",",a["shelf"]["data"])}fxView["machine"]["caller"](["skins","data",a["skin"]],[a,e,i,t],a);a["run"]["data"]++};i["deploy"]=function(){if(a["run"]["deploy"])return;a=fxBase["param"]["merge"](a,{wrapBox:{elem:"<div></div>",attr:{"moire-elem":"elem","moire-type":a["type"],"moire-skin":a["skin"]}},elemBox:{elem:"<div></div>",attr:{id:a["id"]}}},a);fxView["machine"]["caller"](["before"],[a,e],a);a["wrap"]=$(a["wrapBox"]["elem"]);a["wrap"].attr(a["wrapBox"]["attr"]);a["elem"]=$(a["elemBox"]["elem"]);a["elem"].attr(a["elemBox"]["attr"]);fxView["machine"]["caller"](["skins","deploy",a["skin"]],[a,e,i,t],a);fxView["machine"]["caller"](["after"],[a,e],a);a["run"]["deploy"]++};i["done"]=function(){fxView["machine"]["caller"](["skins","done",a["skin"]],[a,e,i,t],a);fxView["machine"]["caller"](["done"],[a,e],a);a["run"]["done"]++};i["echo"]=function(){a["echo"]=a["data"];fxView["machine"]["caller"](["skins","echo",a["skin"]],[a,e,i,t],a);a["run"]["echo"]++};i["reset"]=function(){a["elem"].html(!isBlank(a["shelf"]["data"][a["data"]])?a["shelf"]["data"][a["data"]]:"");fxView["machine"]["caller"](["skins","reset",a["skin"]],[a,e,i,t],a);a["run"]["reset"]++};i["clean"]=function(){fxView["machine"]["caller"](["skins","clean",a["skin"]],[a,e,i,t],a);a["run"]["clean"]++};return i});fxView["machine"]["deployer"](["material","elem","selected","skin","deploy"],{table:function(a,e,i,t){a["templet"]=function(e){t["field"]=fxBase["text"]["explode"]("-_",a["field"]);t["data"]=e;$.each(t["field"],function(e,a){if(!isBlank(t["data"][a])){t["data"]=t["data"][a]}else{t["data"]="";return false}});a["list"].push(e);return!isBlank(a["shelf"]["data"][t["data"]])?a["shelf"]["data"][t["data"]]:""}},table_link:function(a,e,i,t){a["wrapBox"]["attr"]["moire-elem"]="link";a["templet"]=function(e){t["field"]=fxBase["text"]["explode"]("-_",a["field"]);t["data"]=e;$.each(t["field"],function(e,a){if(!isBlank(t["data"][a])){t["data"]=t["data"][a]}else{t["data"]="";return false}});a["list"].push(e);t["echo"]="";t["url"]=fxBase["param"]["url"]({type:"1.1",url:a["option"]["url"],param:a["option"]["param"](a["field"],e)});if(!isBlank(a["shelf"]["data"][t["data"]])){t["attr"]={"fxy-href":t["url"],title:a["title"]};t["echo"]=$("<a><div></div></a>");t["echo"].attr(t["attr"]);t["attr"]={class:a["option"]["class"]};t["echo"].find("div").attr(t["attr"]).text(a["shelf"]["data"][t["data"]]);t["echo"]=t["echo"].prop("outerHTML")}return t["echo"]}},view:function(e,a,i,t){a["pack"].append(e["wrap"]);e["wrap"].attr({class:"layui-col-xs12 layui-col-md6"});e["wrap"].append('<div moire-key="'+e["type"]+'"></div><div moire-cell="'+e["type"]+'"></div>');e["wrap"].children("[moire-key]").html(e["label"]);e["wrap"].children("[moire-cell]").append(e["elem"]);e["elem"].attr({class:"moire-div"})}});fxView["machine"]["deployer"](["material","elem","selects","main"],function(){var e,i,a,t={};t["base"]=e={};t["dark"]=i={};t["tray"]=a={};t["init"]=function(){fxView["machine"]["darker"](i,arguments[0]);e=fxBase["param"]["merge"](e,{},isObject(arguments[1])?arguments[1]:{});i=fxBase["param"]["merge"](i,{echoSwitch:1,default:["choice",i["title"]],defaultValue:0,plugin:{radio:false}},i);i["title"]=fxBase["base"]["lang"](i["title"]);i["default"]=fxBase["base"]["lang"](i["default"]);t["data"]();fxView["machine"]["caller"](["skins","init",i["skin"]],[i,e,t,a],i);i["run"]["init"]++};t["data"]=function(){if(isBlank(i["data"])){i["data"]=[]}else if(!isArray(i["data"])&&!isObject(i["data"])){i["data"]=fxBase["text"]["explode"](",",i["data"])}if(isBlank(i["shelf"]["data"])){i["shelf"]["data"]={}}else if(!isArray(i["shelf"]["data"])&&!isObject(i["shelf"]["data"])){i["shelf"]["data"]=fxBase["text"]["explode"](",",i["shelf"]["data"])}fxView["machine"]["caller"](["skins","data",i["skin"]],[i,e,t,a],i);i["run"]["data"]++};t["deploy"]=function(){if(i["run"]["deploy"])return;i=fxBase["param"]["merge"](i,{wrapBox:{elem:"<div></div>",attr:{"moire-elem":"elem","moire-type":i["type"],"moire-skin":i["skin"]}},elemBox:{elem:"<select "+(i["plugin"]["radio"]?" xm-select-radio":"")+"></select>",attr:{id:i["id"],name:i["field"]}}},i);fxView["machine"]["caller"](["before"],[i,e],i);i["wrap"]=$(i["wrapBox"]["elem"]);i["wrap"].attr(i["wrapBox"]["attr"]);i["elem"]=$(i["elemBox"]["elem"]);i["elem"].attr(i["elemBox"]["attr"]);i["elem"].append('<option value="">'+i["default"]+"</option>");$.each(i["shelf"]["data"],function(e,a){i["elem"].append('<option value="'+e+'">'+a+"</option>")});fxView["machine"]["caller"](["skins","deploy",i["skin"]],[i,e,t,a],i);fxView["machine"]["caller"](["after"],[i,e],i);i["run"]["deploy"]++};t["done"]=function(){fxView["machine"]["caller"](["skins","done",i["skin"]],[i,e,t,a],i);fxView["machine"]["caller"](["done"],[i,e],i);i["run"]["done"]++};t["echo"]=function(){i["echo"]=layui.formSelects.value(i["field"],"valStr");fxView["machine"]["caller"](["skins","echo",i["skin"]],[i,e,t,a],i);if(i["echoSwitch"]==1&&i["require"]==1&&isBlank(i["echo"])){i["elem"].parents("[moire-cell]").find(".xm-select-label").trigger("click");layui.layer.msg(fxBase["base"]["lang"](["please","choice",i["label"]]),{icon:5,anim:6});return false}i["run"]["echo"]++};t["reset"]=function(){layui.formSelects.value(i["field"],i["data"]);fxView["machine"]["caller"](["skins","reset",i["skin"]],[i,e,t,a],i);i["run"]["reset"]++};t["clean"]=function(){layui.formSelects.value(i["field"],[]);fxView["machine"]["caller"](["skins","clean",i["skin"]],[i,e,t,a],i);i["run"]["clean"]++};return t});fxView["machine"]["deployer"](["material","elem","selects","skin","deploy"],{search:function(e,a,i,t){a["pack"].append(e["wrap"]);e["wrap"].attr({class:"layui-col-xs6 layui-col-sm3 layui-col-md2"});e["wrap"].append(e["elem"]);e["elem"].attr({"xm-select":e["field"],"xm-select-height":"36px","xm-select-search":"","xm-select-search-type":"dl"});fxView["layui"]["init"]({type:"select",id:e["field"],plugin:e["plugin"]});layui.formSelects.value(e["field"],e["data"])},view:function(e,a,i,t){a["pack"].append(e["wrap"]);e["wrap"].attr({class:"layui-col-xs12 layui-col-md6"});e["wrap"].append('<div moire-key="'+e["type"]+'"></div><div moire-cell="'+e["type"]+'"></div>');e["wrap"].children("[moire-key]").html(e["label"]+e["requireMark"]);e["wrap"].children("[moire-cell]").append(e["elem"]);e["elem"].attr({"xm-select":e["field"],"xm-select-height":"36px","xm-select-search":"","xm-select-search-type":"dl"});fxView["layui"]["init"]({type:"select",id:e["field"],plugin:e["plugin"]});layui.formSelects.value(e["field"],e["data"])}});fxView["machine"]["deployer"](["material","elem","selects","skin","echo"],{view:function(e,a,i,t){e["echo"]=e["require"]==1||!isBlank(e["echo"])?e["echo"]:e["defaultValue"]}});fxView["machine"]["deployer"](["material","elem","switch","main"],function(){var e,a,i,t={};t["base"]=e={};t["dark"]=a={};t["tray"]=i={};t["init"]=function(){fxView["machine"]["darker"](a,arguments[0]);e=fxBase["param"]["merge"](e,{},isObject(arguments[1])?arguments[1]:{});a=fxBase["param"]["merge"](a,{echoSwitch:1},a);a["title"]=fxBase["base"]["lang"](a["title"]);t["data"]();fxView["machine"]["caller"](["skins","init",a["skin"]],[a,e,t,i],a);a["run"]["init"]++};t["data"]=function(){if(isBlank(a["shelf"]["data"])){a["shelf"]["data"]={}}else if(!isArray(a["shelf"]["data"])&&!isObject(a["shelf"]["data"])){a["shelf"]["data"]=fxBase["text"]["explode"](",",a["shelf"]["data"])}a["shelf"]["dataEcho"]=fxBase["text"]["implode"]("|",Object.values(a["shelf"]["data"]).reverse());fxView["machine"]["caller"](["skins","data",a["skin"]],[a,e,t,i],a);a["run"]["data"]++};t["deploy"]=function(){if(a["run"]["deploy"])return;a=fxBase["param"]["merge"](a,{wrapBox:{elem:"<div></div>",attr:{"moire-elem":"elem","moire-type":a["type"],"moire-skin":a["skin"]}},elemBox:{elem:"<input>",attr:{type:"checkbox",id:a["id"],name:a["field"],"lay-skin":"switch","lay-text":a["shelf"]["dataEcho"]}}},a);fxView["machine"]["caller"](["before"],[a,e],a);a["wrap"]=$(a["wrapBox"]["elem"]);a["wrap"].attr(a["wrapBox"]["attr"]);a["elem"]=$(a["elemBox"]["elem"]);a["elem"].attr(a["elemBox"]["attr"]);fxView["machine"]["caller"](["skins","deploy",a["skin"]],[a,e,t,i],a);fxView["machine"]["caller"](["after"],[a,e],a);a["run"]["deploy"]++};t["done"]=function(){fxView["machine"]["caller"](["skins","done",a["skin"]],[a,e,t,i],a);fxView["machine"]["caller"](["done"],[a,e],a);a["run"]["done"]++};t["echo"]=function(){a["echo"]=a["elem"].prop("checked")?1:0;fxView["machine"]["caller"](["skins","echo",a["skin"]],[a,e,t,i],a);a["run"]["echo"]++};t["reset"]=function(){a["elem"].prop("checked",!!parseInt(a["data"]));fxView["machine"]["caller"](["skins","reset",a["skin"]],[a,e,t,i],a);a["run"]["reset"]++};t["clean"]=function(){a["elem"].prop("checked",false);fxView["machine"]["caller"](["skins","clean",a["skin"]],[a,e,t,i],a);a["run"]["clean"]++};return t});fxView["machine"]["deployer"](["material","elem","switch","skin","deploy"],{table:function(a,i,e,t){a["templet"]=function(e){t["field"]=fxBase["text"]["explode"]("-_",a["field"]);t["data"]=e;$.each(t["field"],function(e,a){if(!isBlank(t["data"][a])){t["data"]=t["data"][a]}else{t["data"]="";return false}});a["list"].push(e);t["echo"]="";if(!isBlank(a["shelf"]["data"][t["data"]])){t["echo"]=$("<input>");t["echo"].attr({type:"checkbox",name:a["field"],value:e[i["mould"]["base"]["model"]["key"]],"lay-skin":"switch","lay-text":a["shelf"]["dataEcho"],"lay-filter":a["field"],checked:t["data"]==1?"checked":null});t["echo"].text(a["shelf"]["data"][t["data"]]);t["echo"]=t["echo"].prop("outerHTML")}return t["echo"]}},view:function(e,a,i,t){a["pack"].append(e["wrap"]);e["wrap"].attr({class:"layui-col-xs12 layui-col-md6"});e["wrap"].append('<div moire-key="'+e["type"]+'"></div><div moire-cell="'+e["type"]+'"></div>');e["wrap"].children("[moire-key]").html(e["label"]+e["requireMark"]);e["wrap"].children("[moire-cell]").append(e["elem"]);e["elem"].attr({class:"layui-input"})}});fxView["machine"]["deployer"](["material","elem","table","main"],function(){var e,l,n,a={};a["base"]=e={};a["dark"]=l={};a["tray"]=n={};a["init"]=function(){fxView["machine"]["darker"](l,arguments[0]);e=fxBase["param"]["merge"](e,{},isObject(arguments[1])?arguments[1]:{});l=fxBase["param"]["merge"](l,{echoSwitch:1,default:["add",l["title"]],plugin:{group:{name:l["id"]},animation:150,filter:".moire-delete"},add:{switch:true,disabled:"disabled"},delete:{switch:true,elem:"",width:"0px",text:["delete"]}},l);l["title"]=fxBase["base"]["lang"](l["title"]);l["default"]=fxBase["base"]["lang"](l["default"]);l["delete"]["text"]=fxBase["base"]["lang"](l["delete"]["text"]);a["data"]();fxView["machine"]["caller"](["skins","init",l["skin"]],[l,e,a,n],l);l["run"]["init"]++};a["data"]=function(){if(isBlank(l["data"])){l["data"]=[]}else if(isJson(l["data"])){l["data"]=JSON.parse(l["data"])}else if(!isArray(l["data"])&&!isObject(l["data"])){l["data"]=fxBase["text"]["explode"](",",l["data"])}if(isBlank(l["shelf"]["data"])){l["shelf"]["data"]={}}else if(!isArray(l["shelf"]["data"])&&!isObject(l["shelf"]["data"])){l["shelf"]["data"]=fxBase["text"]["explode"](",",l["shelf"]["data"])}fxView["machine"]["caller"](["skins","data",l["skin"]],[l,e,a,n],l);l["run"]["data"]++};a["deploy"]=function(){if(l["run"]["deploy"])return;l=fxBase["param"]["merge"](l,{wrapBox:{elem:"<div></div>",attr:{"moire-elem":"elem","moire-type":l["type"],"moire-skin":l["skin"]}},elemBox:{elem:'<div><div class="moire-elem-inline"></div></div>',attr:{id:l["id"]}}},l);fxView["machine"]["caller"](["before"],[l,e],l);l["wrap"]=$(l["wrapBox"]["elem"]);l["wrap"].attr(l["wrapBox"]["attr"]);l["elem"]=$(l["elemBox"]["elem"]);l["elem"].attr(l["elemBox"]["attr"]);fxView["machine"]["caller"](["skins","deploy",l["skin"]],[l,e,a,n],l);fxView["machine"]["caller"](["after"],[l,e],l);l["run"]["deploy"]++};a["done"]=function(){fxView["machine"]["caller"](["skins","done",l["skin"]],[l,e,a,n],l);fxView["machine"]["caller"](["done"],[l,e],l);l["run"]["done"]++};a["echo"]=function(){if(!l["add"]["switch"]&&!l["delete"]["switch"])return true;l["echo"]=[];fxView["machine"]["caller"](["skins","echo",l["skin"]],[l,e,a,n],l);if(l["echoSwitch"]==1&&l["require"]==1&&isEmpty(l["echo"])){layui.layer.msg(fxBase["base"]["lang"](["please","add",l["label"]]),{icon:5,anim:6});return false}l["run"]["echo"]++};a["reset"]=function(){l["elem"].find(".moire-elem-inline>div").remove();$.each(l["data"],function(e,i){var t=$('<div class="moire-clear"></div>');$.each(l["shelf"]["data"],function(e,a){if(true===a["self"]&&l["skin"]=="view_row"){n["value"]=i}else if(true===a["self"]){n["value"]={};n["value"][a["field"]]=i[a["field"]]}else{n["value"]=i[a["field"]]}if(!isString(n["value"])){n["value"]=JSON.stringify(n["value"])}t.append('<input type="text" class="layui-input" moire-type="'+a["field"]+'"'+' placeholder="'+fxBase["base"]["lang"](a["title"])+'" autocomplete="off">');t.find("[moire-type="+a["field"]+"]").attr({disabled:l["add"]["disabled"],style:a["style"]}).css("width",a["width"]).val(n["value"])});t.append(l["delete"]["elem"]);l["elem"].find(".moire-elem-inline").append(t)});fxView["machine"]["caller"](["skins","reset",l["skin"]],[l,e,a,n],l);l["run"]["reset"]++};a["clean"]=function(){l["elem"].find(".moire-elem-inline>div").remove();fxView["machine"]["caller"](["skins","clean",l["skin"]],[l,e,a,n],l);l["run"]["clean"]++};return a});fxView["machine"]["deployer"](["material","elem","table","skin","deploy"],{table:function(a,e,i,l){a["templet"]=function(e){l["field"]=fxBase["text"]["explode"]("-_",a["field"]);l["data"]=e;$.each(l["field"],function(e,a){if(!isBlank(l["data"][a])){l["data"]=l["data"][a]}else{l["data"]="";return false}});a["list"].push(e);l["echo"]=[];if(isBlank(l["data"])){l["data"]=[]}else if(isJson(l["data"])){l["data"]=JSON.parse(l["data"])}else if(!isArray(l["data"])&&!isObject(l["data"])){l["data"]=fxBase["text"]["explode"](",",l["data"])}$.each(l["data"],function(i,t){l["echo"][i]=[];$.each(a["shelf"]["data"],function(e,a){l["echo"][i].push(t[a["field"]])});l["echo"][i]=fxBase["text"]["implode"](fxBase["base"]["lang"](":"),l["echo"][i])});l["echo"]=fxBase["text"]["implode"](fxBase["base"]["lang"]("|"),l["echo"]);return l["echo"]}},table_row:function(a,e,i,t){a["templet"]=function(e){t["field"]=fxBase["text"]["explode"]("-_",a["field"]);t["data"]=e;$.each(t["field"],function(e,a){if(!isBlank(t["data"][a])){t["data"]=t["data"][a]}else{t["data"]="";return false}});a["list"].push(e);t["echo"]=[];if(isBlank(t["data"])){t["data"]=[]}else if(isJson(t["data"])){t["data"]=JSON.parse(t["data"])}else if(!isArray(t["data"])&&!isObject(t["data"])){t["data"]=fxBase["text"]["explode"](",",t["data"])}$.each(t["data"],function(e,a){t["echo"].push(a)});t["echo"]=fxBase["text"]["implode"](fxBase["base"]["lang"]("|"),t["echo"]);return t["echo"]}},view:function(e,a,i,t){a["pack"].append(e["wrap"]);e["wrap"].attr({class:"layui-col-xs12 layui-col-md6"});e["wrap"].append('<div moire-key="'+e["type"]+'"></div><div moire-cell="'+e["type"]+'"></div>');e["wrap"].children("[moire-key]").html(e["label"]+e["requireMark"]);e["wrap"].children("[moire-cell]").append(e["elem"]);e["elem"].attr({class:"moire-div"});e["elem"].find(".moire-elem-inline").attr({name:e["field"]});if(e["delete"]["switch"]){e["delete"]["elem"]='<button class="layui-btn layui-btn-sm layui-btn-danger moire-bg-red-light moire-delete" type="button">'+e["delete"]["text"]+"</button>";e["delete"]["width"]="80px";e["elem"].parents("div[moire-cell]").on("click",".moire-delete",function(){var a={};a["elem"]=$(this).parents(".moire-elem-inline>div");a["message"]=fxBase["base"]["lang"](["是否删除","[",e["title"],"]","选项","[",a["elem"].index()+1,"]","？"]);a["config"]={title:null,icon:0,closeBtn:0,shadeClose:true,success:function(e,a){t["layer.index"]=fxBase["text"]["implode"]("-",[$(e[0]).attr("times"),fxApp["rank"]["self.code"],"layui"]);fxApp["rank"]["self.layer.index.set"](t["layer.index"])},end:function(){fxApp["rank"]["self.layer.index.destroy"](t["layer.index"])}};layui.layer.confirm(a["message"],a["config"],function(e){a["elem"].remove();fxApp["rank"]["self.layer.index.destroy"](t["layer.index"]);layui.layer.close(e)})})}if(e["add"]["switch"]){e["add"]["disabled"]=null}t["width"]=[e["delete"]["width"]];t["count"]=0;$.each(e["shelf"]["data"],function(e,a){if(!isBlank(a["width"])){t["width"].push(a["width"])}else{t["count"]++}});t["width"]=fxBase["text"]["implode"](" - ",t["width"]);$.each(e["shelf"]["data"],function(e,a){if(isBlank(a["width"])){a["width"]="calc((100% - "+t["width"]+") / "+t["count"]+")"}});if(e["add"]["switch"]){e["elem"].append('<div class="moire-elem-operate">'+'<button type="button" class="layui-btn moire-operate" id="'+e["id"]+'">'+fxBase["base"]["lang"](e["default"])+"</button></div>");e["elem"].parents("div[moire-cell]").on("click",".moire-operate",function(){var i=$('<div class="moire-clear"></div>');$.each(e["shelf"]["data"],function(e,a){i.append('<input type="text" class="layui-input" moire-type="'+a["field"]+'"'+' placeholder="'+fxBase["base"]["lang"](a["title"])+'" autocomplete="off">');i.find("[moire-type="+a["field"]+"]").attr({style:a["style"]}).css("width",a["width"])});i.append(e["delete"]["elem"]);e["elem"].find(".moire-elem-inline").append(i)});e["plugin"]["echo"]=new Sortable(e["elem"].find(".moire-elem-inline")[0],e["plugin"])}},view_row:function(e,a,i,t){fxView["material"]["elem"]["table"]["skin"]["deploy"]["view"](e,a,i,t)}});fxView["machine"]["deployer"](["material","elem","table","skin","echo"],{view:function(t,e,a,l){$(t["plugin"]["echo"].el).children().each(function(i,e){t["echo"][i]={};$(e).children("input").each(function(e,a){if(true===t["shelf"]["data"][e]["self"]){l["value"]=$(a).val();if(!isJson(l["value"])){l["value"]="{}"}l["value"]=JSON.parse(l["value"]);t["echo"][i]=fxBase["param"]["merge"](t["echo"][i],l["value"])}else{t["echo"][i][$(a).attr("moire-type")]=$(a).val()}})})},view_row:function(i,e,a,t){$(i["plugin"]["echo"].el).children().each(function(e,a){$(a).children("input").each(function(e,a){i["echo"].push($(a).val())})})}});fxView["machine"]["deployer"](["material","elem","text","main"],function(){var e,a,t,i={};i["base"]=e={};i["dark"]=a={};i["tray"]=t={};i["init"]=function(){fxView["machine"]["darker"](a,arguments[0]);e=fxBase["param"]["merge"](e,{},isObject(arguments[1])?arguments[1]:{});a=fxBase["param"]["merge"](a,{echoSwitch:0,option:{url:null,param:function(e,a){var i={data:{}};t["field"]=fxBase["text"]["explode"]("-_",e);t["data"]=a;$.each(t["field"],function(e,a){if(!isBlank(t["data"][a])){t["data"]=t["data"][a]}else{t["data"]="";return false}});i["data"][e]=t["data"];return i},class:a["id"]+"-elem",text:["click","jump"],target:"_blank"}},a);a["title"]=fxBase["base"]["lang"](a["title"]);a["option"]["text"]=fxBase["base"]["lang"](a["option"]["text"]);i["data"]();fxView["machine"]["caller"](["skins","init",a["skin"]],[a,e,i,t],a);a["run"]["init"]++};i["data"]=function(){fxView["machine"]["caller"](["skins","data",a["skin"]],[a,e,i,t],a);a["run"]["data"]++};i["deploy"]=function(){if(a["run"]["deploy"])return;a=fxBase["param"]["merge"](a,{wrapBox:{elem:"<div></div>",attr:{"moire-elem":"elem","moire-type":a["type"],"moire-skin":a["skin"]}},elemBox:{elem:"<div></div>",attr:{id:a["id"]}}},a);fxView["machine"]["caller"](["before"],[a,e],a);a["wrap"]=$(a["wrapBox"]["elem"]);a["wrap"].attr(a["wrapBox"]["attr"]);a["elem"]=$(a["elemBox"]["elem"]);a["elem"].attr(a["elemBox"]["attr"]);fxView["machine"]["caller"](["skins","deploy",a["skin"]],[a,e,i,t],a);fxView["machine"]["caller"](["after"],[a,e],a);a["run"]["deploy"]++};i["done"]=function(){fxView["machine"]["caller"](["skins","done",a["skin"]],[a,e,i,t],a);fxView["machine"]["caller"](["done"],[a,e],a);a["run"]["done"]++};i["echo"]=function(){a["echo"]=a["elem"].text();fxView["machine"]["caller"](["skins","echo",a["skin"]],[a,e,i,t],a);a["run"]["echo"]++};i["reset"]=function(){a["elem"].text(a["data"]+a["dataSuffix"]);fxView["machine"]["caller"](["skins","reset",a["skin"]],[a,e,i,t],a);a["run"]["reset"]++};i["clean"]=function(){fxView["machine"]["caller"](["skins","clean",a["skin"]],[a,e,i,t],a);a["run"]["clean"]++};return i});fxView["machine"]["deployer"](["material","elem","text","skin","deploy"],{table:function(a,e,i,t){a["templet"]=function(e){t["field"]=fxBase["text"]["explode"]("-_",a["field"]);t["data"]=e;$.each(t["field"],function(e,a){if(!isBlank(t["data"][a])){t["data"]=t["data"][a]}else{t["data"]="";return false}});a["list"].push(e);return!isBlank(t["data"])?t["data"]+a["dataSuffix"]:""}},table_link:function(a,e,i,t){a["wrapBox"]["attr"]["moire-elem"]="link";a["templet"]=function(e){t["field"]=fxBase["text"]["explode"]("-_",a["field"]);t["data"]=e;$.each(t["field"],function(e,a){if(!isBlank(t["data"][a])){t["data"]=t["data"][a]}else{t["data"]="";return false}});a["list"].push(e);t["echo"]="";if(!isBlank(a["option"]["url"])){t["href"]="fxy-href";t["url"]=fxBase["param"]["url"]({type:"1.2",url:a["option"]["url"],param:a["option"]["param"](a["field"],e)})}else{t["href"]="href";t["url"]=t["data"]}if(!isBlank(t["url"])){t["attr"]={title:a["title"],target:a["option"]["target"]};t["attr"][t["href"]]=t["url"];t["echo"]=$("<a><div></div></a>");t["echo"].attr(t["attr"]);t["attr"]={class:a["option"]["class"]};t["echo"].find("div").attr(t["attr"]).text(a["option"]["text"]);t["echo"]=t["echo"].prop("outerHTML")}return t["echo"]}},view:function(e,a,i,t){a["pack"].append(e["wrap"]);e["wrap"].attr({class:"layui-col-xs12 layui-col-md6"});e["wrap"].append('<div moire-key="'+e["type"]+'"></div><div moire-cell="'+e["type"]+'"></div>');e["wrap"].children("[moire-key]").html(e["label"]);e["wrap"].children("[moire-cell]").append(e["elem"]);e["elem"].attr({class:"moire-div"})}});fxView["machine"]["deployer"](["material","elem","textarea","main"],function(){var e,a,i,t={};t["base"]=e={};t["dark"]=a={};t["tray"]=i={};t["init"]=function(){fxView["machine"]["darker"](a,arguments[0]);e=fxBase["param"]["merge"](e,{},isObject(arguments[1])?arguments[1]:{});a=fxBase["param"]["merge"](a,{echoSwitch:1,default:["input",a["title"]]},a);a["title"]=fxBase["base"]["lang"](a["title"]);a["default"]=fxBase["base"]["lang"](a["default"]);t["data"]();fxView["machine"]["caller"](["skins","init",a["skin"]],[a,e,t,i],a);a["run"]["init"]++};t["data"]=function(){fxView["machine"]["caller"](["skins","data",a["skin"]],[a,e,t,i],a);a["run"]["data"]++};t["deploy"]=function(){if(a["run"]["deploy"])return;a=fxBase["param"]["merge"](a,{wrapBox:{elem:"<div></div>",attr:{"moire-elem":"elem","moire-type":a["type"],"moire-skin":a["skin"]}},elemBox:{elem:"<textarea></textarea>",attr:{type:"text",id:a["id"],name:a["field"],placeholder:a["default"],autocomplete:"off"}}},a);fxView["machine"]["caller"](["before"],[a,e],a);a["wrap"]=$(a["wrapBox"]["elem"]);a["wrap"].attr(a["wrapBox"]["attr"]);a["elem"]=$(a["elemBox"]["elem"]);a["elem"].attr(a["elemBox"]["attr"]);fxView["machine"]["caller"](["skins","deploy",a["skin"]],[a,e,t,i],a);fxView["machine"]["caller"](["after"],[a,e],a);a["run"]["deploy"]++};t["done"]=function(){fxView["machine"]["caller"](["skins","done",a["skin"]],[a,e,t,i],a);fxView["machine"]["caller"](["done"],[a,e],a);a["run"]["done"]++};t["echo"]=function(){a["echo"]=a["elem"].val();fxView["machine"]["caller"](["skins","echo",a["skin"]],[a,e,t,i],a);if(a["echoSwitch"]==1&&a["require"]==1&&isBlank(a["echo"])){a["elem"].trigger("focus");layui.layer.msg(fxBase["base"]["lang"](["please","input",a["label"]]),{icon:5,anim:6});return false}a["run"]["echo"]++};t["reset"]=function(){a["elem"].val(a["data"]);fxView["machine"]["caller"](["skins","reset",a["skin"]],[a,e,t,i],a);a["run"]["reset"]++};t["clean"]=function(){a["elem"].val("");fxView["machine"]["caller"](["skins","clean",a["skin"]],[a,e,t,i],a);a["run"]["clean"]++};return t});fxView["machine"]["deployer"](["material","elem","textarea","skin","deploy"],{view:function(e,a,i,t){a["pack"].append(e["wrap"]);e["wrap"].attr({class:"layui-col-xs12 layui-col-md6"});e["wrap"].append('<div moire-key="'+e["type"]+'"></div><div moire-cell="'+e["type"]+'"></div>');e["wrap"].children("[moire-key]").html(e["label"]+e["requireMark"]);e["wrap"].children("[moire-cell]").append(e["elem"]);e["elem"].attr({class:"layui-textarea"})}});fxView["machine"]["deployer"](["material","template","tool"],{tips:"","tips-text":"<textarea readonly></textarea>","view-search":""+'<button moire-cell="submit" class="layui-btn moire-bg-green-light moire-submit" lay-filter="moire-submit" lay-submit>search</button>'+'<button moire-cell="reset" class="layui-btn layui-btn-primary moire-reset" type="button">reset</button>'+'<button moire-cell="clear" class="layui-btn layui-btn-primary moire-clean" type="button">clear</button>'+'<button moire-cell="switch" class="layui-btn layui-btn-primary moire-switch" type="button">fold</button>',"view-edit":""+'<button moire-cell="submit" class="layui-btn layui-btn-sm moire-bg-green-light moire-submit" lay-filter="moire-submit" lay-submit>save</button>'+'<button moire-cell="reset" class="layui-btn layui-btn-sm layui-btn-primary moire-reset" type="button">reset</button>'+'<button moire-cell="clear" class="layui-btn layui-btn-sm layui-btn-primary moire-clean" type="button">clear</button>'+'<button moire-cell="close" class="layui-btn layui-btn-sm layui-btn-danger moire-bg-red-light moire-close" type="button">close</button>',"table-head":""+'<button moire-cell="add" class="layui-btn layui-btn-sm moire-bg-green-light" lay-event="add">add</button>'+'<button moire-cell="delete" class="layui-btn layui-btn-sm layui-btn-danger moire-bg-red-light" lay-event="delete">delete</button>'+'<button moire-cell="import" class="layui-btn layui-btn-sm layui-btn-primary" lay-event="import">import</button>'+'<button moire-cell="export" class="layui-btn layui-btn-sm layui-btn-primary" lay-event="export">export</button>'+'<button moire-cell="upload" class="layui-btn layui-btn-sm layui-btn-primary" lay-event="upload">upload</button>'+'<button moire-cell="download" class="layui-btn layui-btn-sm layui-btn-primary" lay-event="download">download</button>'+'<button moire-cell="link" class="layui-btn layui-btn-sm layui-btn-primary" lay-event="link">link</button>',"table-cell":""+'<a moire-cell="view" class="layui-btn layui-btn-xs layui-btn-primary" lay-event="view">view</a>'+'<a moire-cell="edit" class="layui-btn layui-btn-xs moire-bg-green-light" lay-event="edit">edit</a>'+'<a moire-cell="delete" class="layui-btn layui-btn-xs layui-btn-danger moire-bg-red-light" lay-event="delete">delete</a>'+'<a moire-cell="link" class="layui-btn layui-btn-xs layui-btn-primary" lay-event="link">link</a>'});fxView["machine"]["deployer"](["material","template","view"],{search:""+'<form class="layui-form layui-elem-quote layui-col-space5 moire-clear moire-search"></form>',table:""+'<div id="moire-table" class="moire-table" lay-filter="moire-table"></div>',view:""+'<form class="layui-form moire-view">'+'<div class="layui-table moire-clear moire-table">'+"</div>"+'<div class="moire-buttons">'+'<div class="moire-button"></div>'+'<div class="moire-button"></div>'+"</div>"+"</form>",video:'<video class="video-js media-video"></video>',image:'<img class="media-image">'});fxView["machine"]["deployer"](["mould","tool","delete","main"],function(){var e=[null,"layui"];e=fxBase["param"]["merge"](e,arguments);if(!isFunction(fxView["machine"]["caller"](["mould","tool","delete","skin",e[1]]))){return fxView["machine"]["caller"](["mould","tool","message","main"],[{text:[e[1],"plugin","not loaded"]}])}fxView["machine"]["caller"](["before"],e,e[0]);fxView["machine"]["caller"](["mould","tool","delete","skin",e[1]],e);fxView["machine"]["caller"](["after"],e,e[0])});fxView["machine"]["deployer"](["mould","tool","delete","skin","layui"],function(){var i=fxBase["param"]["merge"]({},fxView["shelf"]["view"]);var t={};i=fxBase["param"]["merge"](i,arguments[0]);t[i["model"]["key"]]=[];if(!isSet(i["api"]["delete"])){return fxView["machine"]["caller"](["mould","tool","message","main"],[{text:["feature","not configured"]}])}t["reload"]=true;if(isObject(i["param"])){t["reload"]=false}if(!isArray(i["param"])){i["param"]=[i["param"]]}if(isEmpty(i["param"])){return fxView["machine"]["caller"](["mould","tool","message","main"],[{text:["please","choice","data"]}])}$.each(i["param"],function(e,a){if(isNumeric(a)||isString(a)){t[i["model"]["key"]].push(a)}else if(isObject(a)&&isSet(a[i["model"]["key"]])){t[i["model"]["key"]].push(a[i["model"]["key"]])}});layui.layer.confirm("是否确认删除？",{icon:0,title:null,closeBtn:0,success:function(e,a){t["layer.index"]=fxBase["text"]["implode"]("-",[$(e[0]).attr("times"),fxApp["rank"]["self.code"],"layui"]);fxApp["rank"]["self.layer.index.set"](t["layer.index"])},end:function(){fxApp["rank"]["self.layer.index.destroy"](t["layer.index"])}},function(e){t["echo"]={url:i["api"]["delete"],async:false,data:{data:{}}};t["echo"]["data"]["data"][i["model"]["key"]]=t[i["model"]["key"]];t["echo"]=fxView["store"]["deal"](t["echo"]);if(t["echo"]["code"]==200&&t["reload"]){i["table"].reload()}else if(t["echo"]["code"]==200){i["event"].del()}fxApp["rank"]["self.layer.index.destroy"](t["layer.index"]);layui.layer.close(e)})});fxView["machine"]["deployer"](["mould","tool","download","main"],function(){var e=[null,"layui"];e=fxBase["param"]["merge"](e,arguments);if(!isFunction(fxView["machine"]["caller"](["mould","tool","download","skin",e[1]]))){return fxView["machine"]["caller"](["mould","tool","message","main"],[{text:[e[1],"plugin","not loaded"]}])}fxView["machine"]["caller"](["before"],e,e[0]);fxView["machine"]["caller"](["mould","tool","download","skin",e[1]],e);fxView["machine"]["caller"](["after"],e,e[0])});fxView["machine"]["deployer"](["mould","tool","download","skin","layui"],function(){var e=fxBase["param"]["merge"]({},fxView["shelf"]["view"]);var a={};a[e["model"]["key"]]=[];if(!isSet(e["api"]["download"])){return fxView["machine"]["caller"](["mould","tool","message","main"],[{text:["feature","not configured"]}])}window.open(e["api"]["download"])});fxView["machine"]["deployer"](["mould","tool","export","main"],function(){var e=[null,"layui"];e=fxBase["param"]["merge"](e,arguments);if(!isFunction(fxView["machine"]["caller"](["mould","tool","export","skin",e[1]]))){return fxView["machine"]["caller"](["mould","tool","message","main"],[{text:[e[1],"plugin","not loaded"]}])}fxView["machine"]["caller"](["before"],e,e[0]);fxView["machine"]["caller"](["mould","tool","export","skin",e[1]],e);fxView["machine"]["caller"](["after"],e,e[0])});fxView["machine"]["deployer"](["mould","tool","export","skin","layui"],function(){var i=fxBase["param"]["merge"]({limit:1e5},fxView["shelf"]["view"]);var t={};i=fxBase["param"]["merge"](i,arguments[0]);t[i["model"]["key"]]=[];if(!isSet(i["api"]["export"])){return fxView["machine"]["caller"](["mould","tool","message","main"],[{text:["feature","not configured"]}])}if(!isArray(i["param"])){i["param"]=[i["param"]]}$.each(i["param"],function(e,a){if(isNumeric(a)||isString(a)){t[i["model"]["key"]].push(a)}else if(isObject(a)&&isSet(a[i["model"]["key"]])){t[i["model"]["key"]].push(a[i["model"]["key"]])}});if(isEmpty(t[i["model"]["key"]])&&(!isObject(fxView["cache"]["echo"]["list"])||fxView["cache"]["echo"]["list"]["extend"]["total_count"]>i["limit"])){t["message"]="推荐将数据筛选至"+i["limit"]+"条以内，数据过多将有可能导出失败";layui.layer.confirm(t["message"],{title:false,closeBtn:false,success:function(e,a){t["layer.index"]=fxBase["text"]["implode"]("-",[$(e[0]).attr("times"),fxApp["rank"]["self.code"],"layui"]);fxApp["rank"]["self.layer.index.set"](t["layer.index"])},end:function(){fxApp["rank"]["self.layer.index.destroy"](t["layer.index"])}},function(e){fxApp["rank"]["self.layer.index.destroy"](t["layer.index"]);layui.layer.close(e);a()})}else{a()}function a(){t["param"]=fxBase["param"]["url"]({type:"2.1"});t["param"]["base"]["token"]=fxApp["user"]["base"]["token"];if(!isEmpty(t[i["model"]["key"]])){fxView["machine"]["deployer"](["param","data",i["model"]["key"]],t[i["model"]["key"]],t)}t["param"]["base"]["page"]=1;t["param"]["base"]["limit"]=-1;t["url"]=fxBase["param"]["url"]({type:"1.1",url:i["api"]["export"],param:t["param"]});window.open(t["url"])}});fxView["machine"]["deployer"](["mould","tool","import","main"],function(){var e=[null,"layui"];e=fxBase["param"]["merge"](e,arguments);if(!isFunction(fxView["machine"]["caller"](["mould","tool","import","skin",e[1]]))){return fxView["machine"]["caller"](["mould","tool","message","main"],[{text:[e[1],"plugin","not loaded"]}])}fxView["machine"]["caller"](["before"],e,e[0]);fxView["machine"]["caller"](["mould","tool","import","skin",e[1]],e);fxView["machine"]["caller"](["after"],e,e[0])});fxView["machine"]["deployer"](["mould","tool","import","skin","layui"],function(){var e=fxBase["param"]["merge"]({},fxView["shelf"]["view"]);var a={};e=fxBase["param"]["merge"](e,arguments[0]);a[e["model"]["key"]]=[];if(!isSet(e["api"]["import"])){return fxView["machine"]["caller"](["mould","tool","message","main"],[{text:["feature","not configured"]}])}});fxView["machine"]["deployer"](["mould","tool","message","main"],function(){var e=[null,"layui"];e=fxBase["param"]["merge"](e,arguments);if(!isFunction(fxView["machine"]["caller"](["mould","tool","message","skin",e[1]]))){return fxView["machine"]["caller"](["mould","tool","message","main"],[{text:[e[1],"plugin","not loaded"]}])}fxView["machine"]["caller"](["before"],e,e[0]);fxView["machine"]["caller"](["mould","tool","message","skin",e[1]],e);fxView["machine"]["caller"](["after"],e,e[0])});fxView["machine"]["deployer"](["mould","tool","message","skin","layui"],function(){var e={text:"",icon:"info",hideAfter:1500,position:"bottom-left",stack:1,window:top};e=fxBase["param"]["merge"](e,arguments[0]);e["text"]=fxBase["base"]["lang"](e["text"]);e["window"].$.toast(e)});fxView["machine"]["deployer"](["mould","tool","window","main"],function(){var e=[null,"layx"];e=fxBase["param"]["merge"](e,arguments);if(!isFunction(fxView["machine"]["caller"](["mould","tool","window","skin",e[1]]))){return fxView["machine"]["caller"](["mould","tool","message","main"],[{text:[e[1],"plugin","not loaded"]}])}fxView["machine"]["caller"](["before"],e,e[0]);fxView["machine"]["caller"](["mould","tool","window","skin",e[1]],e);fxView["machine"]["caller"](["after"],e,e[0])});fxView["machine"]["deployer"](["mould","tool","window","skin","layui"],function(){var i=fxBase["param"]["merge"]({subtitle:null,option:{type:2,skin:"moire-view",area:["50%","50%"],shade:false,maxmin:true,scrollbar:false,zIndex:fxBase["base"]["maxZIndex"](),success:function(e,a){layui.layer.full(a);fxView["machine"]["deployer"](["rank"],{"parent.window":window,"self.layer.index":i["index"]},$(e[0]).find("iframe").prop("contentWindow").fxApp)},end:function(){fxApp["rank"]["self.layer.index.destroy"](i["index"])}}},fxView["shelf"]["view"]);var e={};i=fxBase["param"]["merge"](i,arguments[0]);if(!isSet(i["page"][i["elem"]])){return fxView["machine"]["caller"](["mould","tool","message","main"],[{text:["feature","not configured"]}])}if(!isBlank(i["param"][i["model"]["key"]])){i["data"]="&data["+i["model"]["key"]+"]="+i["param"][i["model"]["key"]]}else{i["data"]=""}i["option"]=fxBase["param"]["merge"]({title:fxBase["base"]["lang"]([fxApp["view"]["name"],i["subtitle"]]),content:i["page"][i["elem"]]+i["data"]},i["option"]);i["index"]=layui.layer.open(i["option"]);i["index"]=fxBase["text"]["implode"]("-",[i["index"],fxApp["rank"]["self.code"],"layui"]);fxApp["rank"]["self.layer.index.set"](i["index"])});fxView["machine"]["deployer"](["mould","tool","window","skin","layx"],function(){var i=fxBase["param"]["merge"]({subtitle:null,status:null,option:{icon:false,width:"50%",height:"50%",minWidth:200,minHeight:200,storeStatus:false,dragInTopToMax:false,isOverToMax:false,position:"ct",control:true,escKey:false,style:"",controlStyle:"",bgColor:"#fff",shadow:true,border:false,borderRadius:"0",skin:"default",focusToReveal:true,type:"url",dialogIcon:"",floatTarget:false,floatDirection:"ct",existFlicker:true,useFrameTitle:false,opacity:1,shadable:false,shadeDestroy:false,readonly:false,loadingText:"内容正在加载中，请稍后",stickMenu:true,stickable:true,minMenu:true,minable:true,maxMenu:true,maxable:true,closeMenu:true,closable:true,restorable:true,autodestroy:true,autodestroyText:"此窗口将在 <strong>{second}</strong> 秒内自动关闭.",resizable:true,resizeLimit:{t:false,r:false,b:false,l:false,lt:false,rt:false,lb:false,rb:false},movable:true,moveLimit:{vertical:false,horizontal:false,leftOut:true,rightOut:true,topOut:true,bottomOut:true},focusable:true,alwaysOnTop:false,allowControlDbclick:true,statusBar:"",statusBarStyle:"",event:{onload:{before:function(e,a){t["area"]=JSON.parse(JSON.stringify(a.area));$(e).addClass("moire-view")},after:function(e,a){layx.max(i["window"].id);fxView["machine"]["deployer"](["rank"],{"parent.window":window,"self.layer.index":i["index"]},$(e).find("iframe").prop("contentWindow").fxApp);$(top.window).on("resize",function(){if(i["status"]!="max")return;layx.max(i["window"].id)})}},onmin:{before:function(e,a){},after:function(e,a){i["status"]=a.status}},onmax:{before:function(e,a){},after:function(e,a){i["status"]=a.status}},onrestore:{before:function(e,a){},after:function(e,a){i["status"]=a.status}},ondestroy:{before:function(e,a,i,t,l){},after:function(){fxApp["rank"]["self.layer.index.destroy"](i["index"])}},onvisual:{before:function(e,a,i,t,l){},after:function(e,a,i){}},onmove:{before:function(e,a){t["area"]["z-index"]=$(e).css("z-index");t["left"]=a.area.left;t["top"]=a.area.top;t["siteLeft"]=t["touchX"]-t["left"];t["siteTop"]=t["touchY"]-t["top"];t["left"]=t["left"]+t["siteLeft"]-t["siteLeft"]/a.area.width*t["area"]["width"];t["top"]=t["top"]+t["siteTop"]-t["siteTop"]/a.area.height*t["area"]["height"];layx.setPosition(i["window"].id,[t["top"],t["left"]]);layx.setSize(i["window"].id,{width:t["area"]["width"],height:t["area"]["height"]})},progress:function(e,a){t["left"]=a.area.left;t["top"]=a.area.top;t["width"]=a.area.width;t["height"]=a.area.height;i["move"]["touch"]();i["move"]["shadow"]()},after:function(e,a){t["left"]=a.area.left;t["top"]=a.area.top;i["move"]["touch"]();t["shadow"]=false;i["move"]["shadow"]();layx.setPosition(i["window"].id,[t["top"],t["left"]]);layx.setSize(i["window"].id,{width:t["width"],height:t["height"]})}},onresize:{before:function(e,a){},progress:function(e,a){},after:function(e,a){t["area"]=JSON.parse(JSON.stringify(a.area))}},onfocus:function(e,a){},onexist:function(e,a){},onswitch:{before:function(e,a,i){},after:function(e,a,i){}},onstick:{before:function(e,a){},after:function(e,a){}}}},move:{touch:function(){if(false!==i["move"]["touchTimer"]){clearTimeout(i["move"]["touchTimer"]);i["move"]["touchTimer"]=false}t["wallWidth"]=window.innerWidth;t["wallHeight"]=window.innerHeight;t["wallCorner"]=i["move"]["touchCorner"];t["wallEdge"]=i["move"]["touchEdge"];t["shadow"]=true;if(t["touchX"]<=t["wallCorner"]&&t["touchY"]<=t["wallCorner"]){t["left"]=0;t["top"]=0;t["width"]=t["wallWidth"]/2;t["height"]=t["wallHeight"]/2}else if(t["touchX"]>=t["wallWidth"]-t["wallCorner"]&&t["touchY"]<=t["wallCorner"]){t["left"]=t["wallWidth"]/2;t["top"]=0;t["width"]=t["wallWidth"]/2;t["height"]=t["wallHeight"]/2}else if(t["touchX"]>=t["wallWidth"]-t["wallCorner"]&&t["touchY"]>=t["wallHeight"]-t["wallCorner"]){t["left"]=t["wallWidth"]/2;t["top"]=t["wallHeight"]/2;t["width"]=t["wallWidth"]/2;t["height"]=t["wallHeight"]/2}else if(t["touchX"]<=t["wallCorner"]&&t["touchY"]>=t["wallHeight"]-t["wallCorner"]){t["left"]=0;t["top"]=t["wallHeight"]/2;t["width"]=t["wallWidth"]/2;t["height"]=t["wallHeight"]/2}else if(t["touchY"]<=t["wallEdge"]){t["left"]=0;t["top"]=0;t["width"]=t["wallWidth"];t["height"]=t["wallHeight"]/2}else if(t["touchX"]>=t["wallWidth"]-t["wallEdge"]){t["left"]=t["wallWidth"]/2;t["top"]=0;t["width"]=t["wallWidth"]/2;t["height"]=t["wallHeight"]}else if(t["touchY"]>=t["wallHeight"]-t["wallEdge"]){t["left"]=0;t["top"]=t["wallHeight"]/2;t["width"]=t["wallWidth"];t["height"]=t["wallHeight"]/2}else if(t["touchX"]<=t["wallEdge"]){t["left"]=0;t["top"]=0;t["width"]=t["wallWidth"]/2;t["height"]=t["wallHeight"]}else{t["shadow"]=false}},touchCorner:50,touchEdge:20,touchTime:1e3,shadow:function(){t["shadowElem"]=$(".moire-window-shadow");if(!t["shadow"]&&false!==i["move"]["shadowTimer"]){return false}else if(!t["shadow"]){i["move"]["shadowTimer"]=setTimeout(function(){t["shadowElem"].hide()},i["move"]["shadowTime"]);t["shadowElem"].css({opacity:0});return false}else if(false!==i["move"]["shadowTimer"]){clearTimeout(i["move"]["shadowTimer"]);i["move"]["shadowTimer"]=false;t["shadowElem"].attr({style:null});t["shadowElem"].show();t["shadowElem"].css({left:t["touchX"],top:t["touchY"],width:0,height:0,opacity:1,transition:"all 0.3s"})}t["shadowElem"].css({left:t["left"]+i["move"]["shadowZoom"],top:t["top"]+i["move"]["shadowZoom"],width:t["width"]-i["move"]["shadowZoom"]*2,height:t["height"]-i["move"]["shadowZoom"]*2,"z-index":t["area"]["z-index"]-1})},shadowZoom:10,shadowTime:300}},fxView["shelf"]["view"]);var t={};i=fxBase["param"]["merge"](i,arguments[0]);if(!isSet(i["page"][i["elem"]])){return fxView["machine"]["caller"](["mould","tool","message","main"],[{text:["feature","not configured"]}])}if(!isBlank(i["param"][i["model"]["key"]])){i["data"]="&data["+i["model"]["key"]+"]="+i["param"][i["model"]["key"]]}else{i["data"]=""}i["option"]=fxBase["param"]["merge"]({id:md5(i["page"][i["elem"]]+i["data"]),title:fxBase["base"]["lang"]([fxApp["view"]["name"],i["subtitle"]]),url:i["page"][i["elem"]]+i["data"]},i["option"]);i["window"]=layx.open(i["option"]);i["index"]=fxBase["text"]["implode"]("-",[i["window"].id,fxApp["rank"]["self.code"],"layx"]);fxApp["rank"]["self.layer.index.set"](i["index"]);$(i["window"].layxWindow).on("mousemove touchmove mouseleave",function(e){var a;if(e.originalEvent.targetTouches){a=e.originalEvent.targetTouches[0]}else{a=e}t["touchX"]=a.pageX;t["touchY"]=a.pageY});$(document).on("mouseleave",function(e){i["move"]["touchTimer"]=setTimeout(function(){$(i["window"].layxWindow).trigger("mouseup")},i["move"]["touchTime"])})});$(document).ready(function(){$("head").append('<style type="text/css">.moire-window-shadow {'+"position: fixed;"+"left: 0;"+"top: 0;"+"display: none;"+"width: 0;"+"height: 0;"+"box-shadow: rgba(0, 0, 0, 0.3) 1px 1px 24px;"+"}</style>");$("body").append('<div class="moire-window-shadow"></div>')});fxView["machine"]["deployer"](["rank"],{"self.code":md5(window.location.href+fxBase["text"]["mtime"]()),"self.layer.window":{},"self.layer.index.list":[],"self.layer.index.set":function(){var e={0:null};e=fxBase["param"]["merge"](e,arguments);if(!isArray(top.fxApp["rank"]["self.layer.index.list"])||!isSet(e[0]))return false;fxApp["rank"]["self.layer.index.destroy"](e[0]);top.fxApp["rank"]["self.layer.index.list"].unshift(e[0])},"self.layer.index.destroy":function(){var e={0:null};e=fxBase["param"]["merge"](e,arguments);if(!isArray(top.fxApp["rank"]["self.layer.index.list"])||!isSet(e[0]))return false;e["index"]=fxBase["param"]["arraySearch"](e[0],top.fxApp["rank"]["self.layer.index.list"]);if(false!==e["index"]){top.fxApp["rank"]["self.layer.index.list"].splice(e["index"],1)}},"self.layer.close":function(){var e={0:null};e=fxBase["param"]["merge"](e,arguments);if(!isSet(e[0]))return false;e["data"]=fxBase["text"]["explode"]("-",e[0]);e["window"]=top.fxApp["rank"]["self.layer.window"][e["data"][1]];fxApp["rank"]["self.layer.index.destroy"](e[0]);if(!isSet(e["window"]))return false;switch(e["data"][2]){case"layui":e["window"].layui.layer.close(e["data"][0]);break;case"layx":e["window"].layx.destroy(e["data"][0]);break}},"parent.layui.table.reload":function(){var e={0:null};e=fxBase["param"]["merge"](e,arguments);if(!isSet(fxApp["rank"]["parent.window"])||!isSet(e[0]))return false;fxApp["rank"]["parent.window"].layui.table.reload(e[0])}},fxApp);top.fxApp["rank"]["self.layer.window"][fxApp["rank"]["self.code"]]=window;$(document).on("keydown",function(e){if(e.keyCode==27&&top.fxApp["rank"]["self.layer.index.list"].length>0){fxApp["rank"]["self.layer.close"](top.fxApp["rank"]["self.layer.index.list"][0])}});fxView["machine"]["deployer"](["mould","view","add","main"],function(){var e=[null,"layui"];e=fxBase["param"]["merge"](e,arguments);if(!isFunction(fxView["machine"]["caller"](["mould","view","add","skin",e[1]]))){return fxView["machine"]["caller"](["mould","tool","message","main"],[{text:[e[1],"plugin","not loaded"]}])}fxView["machine"]["caller"](["before"],e,e[0]);fxView["machine"]["caller"](["mould","view","add","skin",e[1]],e);fxView["machine"]["caller"](["after"],e,e[0])});fxView["machine"]["deployer"](["mould","view","add","skin","layui"],function(){var e={base:{source:false},toolbar:{0:fxBase["base"]["template"]({elem:"tool",type:"view-edit",cell:"submit,reset,clear"}).html(),1:fxBase["base"]["template"]({elem:"tool",type:"view-edit",cell:"close"}).html()}};e=fxBase["param"]["merge"](e,arguments[0]);fxView["machine"]["caller"](["mould","view","view","main"],[e])});fxView["machine"]["deployer"](["mould","view","edit","main"],function(){var e=[null,"layui"];e=fxBase["param"]["merge"](e,arguments);if(!isFunction(fxView["machine"]["caller"](["mould","view","edit","skin",e[1]]))){return fxView["machine"]["caller"](["mould","tool","message","main"],[{text:[e[1],"plugin","not loaded"]}])}fxView["machine"]["caller"](["before"],e,e[0]);fxView["machine"]["caller"](["mould","view","edit","skin",e[1]],e);fxView["machine"]["caller"](["after"],e,e[0])});fxView["machine"]["deployer"](["mould","view","edit","skin","layui"],function(){var e={base:{},toolbar:{0:fxBase["base"]["template"]({elem:"tool",type:"view-edit",cell:"submit,reset,clear"}).html(),1:fxBase["base"]["template"]({elem:"tool",type:"view-edit",cell:"close"}).html()}};e=fxBase["param"]["merge"](e,arguments[0]);fxView["machine"]["caller"](["mould","view","view","main"],[e])});fxView["machine"]["deployer"](["mould","view","list","main"],function(){var e=[null,"layui"];e=fxBase["param"]["merge"](e,arguments);if(!isFunction(fxView["machine"]["caller"](["mould","view","list","skin",e[1]]))){return fxView["machine"]["caller"](["mould","tool","message","main"],[{text:[e[1],"plugin","not loaded"]}])}fxView["machine"]["caller"](["before"],e,e[0]);fxView["machine"]["caller"](["mould","view","list","skin",e[1]],e);fxView["machine"]["caller"](["after"],e,e[0])});fxView["machine"]["deployer"](["mould","view","list","skin","layui"],function(){var l={base:fxBase["param"]["merge"]({debug:false,skin:"table"},fxView["shelf"]["view"]),data:function(e){e["order"]=!isBlank(e["order"])?e["order"]:"";e["page"]=!isBlank(e["page"])?e["page"]:1;e["limit"]=!isBlank(e["limit"])?e["limit"]:20;return e},search:{},table:{id:"moire-table",elem:"#moire-table",title:fxApp["view"]["title"],cols:[],text:{none:fxBase["base"]["lang"](["empty","data"])},even:true,loading:true,autoSort:false,toolbar:true,defaultToolbar:["filter"],where:{base:{token:fxApp["user"]["base"]["token"]},data:fxApp["data"]},page:{limits:[10,20,30,40,50,60,70,80,90,100]},request:{pageName:"base[page]",limitName:"base[limit]"},response:{statusName:"code",statusCode:200,msgName:"messages"},parseData:function(e){fxApp=fxBase["param"]["merge"](fxApp,this.where);var a=fxBase["param"]["url"]({type:"1.1",param:{base:{order:this.where.base.order,page:this.page.curr,limit:this.page.limit},data:this.where.data}});window.history.replaceState(null,null,a);if(self!=top){a=fxBase["param"]["url"]({type:"1.1",window:top,param:{data:{frame:encodeURIComponent(a)}}});top.history.replaceState(null,null,a)}if(e["extend"]["total_page"]>0&&e["data"].length==0&&e["extend"]["page"]!=e["extend"]["total_page"]){r["table"].reload({page:{curr:e["extend"]["total_page"]}},true)}e["count"]=e["extend"]["total_count"];return e},done:function(e,a,i){fxView["cache"]["echo"]["list"]=e;$.each(r["list"],function(e,a){switch(a["dark"]["skin"]){case"table":case"table_link":a["base"]["pack"]["elem"]=$("tbody [data-field="+a["base"]["pack"]["field"]+"]");a["base"]["pack"]["elem"].attr(a["dark"]["wrapBox"]["attr"]);break}a["done"]()});$(window).trigger("resize");fxView["layui"]["init"]({type:"table"});$("[lay-id=moire-table] img").viewer("update");$("[lay-id=moire-table],.layui-table-main>.layui-table").off("resize");$("[lay-id=moire-table],.layui-table-main>.layui-table").on("resize",function(){r["tableMain"]=$(".layui-table-box>.layui-table-header tr,.layui-table-box>.layui-table-body tr");r["tableLeft"]=$(".layui-table-fixed-l tr");r["tableRight"]=$(".layui-table-fixed-r tr");$.each(r["tableMain"],function(e,a){r["tableLeft"].eq(e).height($(a).height());r["tableRight"].eq(e).height($(a).height())})});$("[lay-id=moire-table]").trigger("resize")}}};var r={};l=fxBase["param"]["merge"](l,arguments[0]);if(!isEmpty(l["search"])){$(".moire-wapper").append(fxBase["base"]["template"]({elem:"view",type:"search"}).html())}if(!isEmpty(l["table"])){$(".moire-wapper").append(fxBase["base"]["template"]({elem:"view",type:"table"}).html())}fxView["machine"]["caller"](["mould","view","search","main"],[l["search"]]);r["search"]=$(".moire-search");r["height"]=$(window).height()-r["search"].outerHeight(true);if(!isSet(l["base"]["api"]["list"])){return fxView["machine"]["caller"](["mould","tool","message","main"],[{text:["list","not configured"]}])}r["list"]=fxView["cache"]["elem"]["table"]={};$.each(l["table"]["cols"],function(t,e){$.each(e,function(e,i){i["title"]=fxBase["base"]["lang"](i["title"]);if(isFunction(i["templet"])||!isObject(i["extend"]))return true;i["extend"]["id"]=fxBase["text"]["explode"](",",i["extend"]["id"]);i["extend"]["type"]=fxBase["text"]["explode"](",",i["extend"]["type"]);$.each(i["extend"]["type"],function(e,a){if(!isFunction(fxView["machine"]["caller"](["material","elem",a,"main"]))){if(l["base"]["debug"]){console.log(fxBase["base"]["lang"](["material","element","[",fxApp["view"]["langc"]["prefix"]+i,"]","not2","load"]))}return true}r["base"]={};r["base"]["cache"]=r["list"];r["base"]["mould"]=l;r["base"]["pack"]=i;r["data"]=fxBase["param"]["merge"](1,{field:i["field"],title:i["title"],skin:l["base"]["skin"]},i["extend"]);r["data"]["id"]=!isBlank(i["extend"]["id"][e])?i["extend"]["id"][e]:t+"-"+i["field"]+"-"+e;r["data"]["type"]=a;r["list"][r["data"]["id"]]=fxView["machine"]["caller"](["material","elem",a,"main"],[]);r["list"][r["data"]["id"]]["init"](r["data"],r["base"])})})});$.each(r["list"],function(e,a){a["deploy"]();a["base"]["pack"]["templet"]=a["dark"]["templet"]});$(window).on("resize",function(){r["fixed"]=$(".layui-table-fixed");r["view"]=$(".layui-table-view");r["height"]=$(window).height()-r["search"].outerHeight(true);if(isSet(r["table"])){r["view"].css("height",r["height"]);r["table"].config.height=r["height"];r["table"].resize()}if($(window).width()<800){r["fixed"].css("display","none")}else{r["fixed"].css("display","")}if(self!=top){$(top.window).trigger("resize")}});$(".moire-wapper").on("resize",function(){r["height"]=$(window).height()-r["search"].outerHeight(true)});if($(window).height()<600){r["search"].find(".moire-switch").trigger("click")}if(self!=top){$(top.document).find("title").html(fxApp["view"]["title"]+" - "+top.fxApp["env"]["title"])}fxApp["base"]=l["data"](fxApp["base"]);l["table"]=fxBase["param"]["merge"](l["table"],{url:l["base"]["api"]["list"],height:r["height"],where:{base:{order:fxApp["base"]["order"]}},page:{curr:fxApp["base"]["page"],limit:fxApp["base"]["limit"]}});r["table"]=layui.table.render(l["table"]);layui.form.on("submit(moire-submit)",function(e){r["data"]={};$.each(fxView["cache"]["elem"]["search"],function(e,a){a["echo"]();if(!isSet(a["dark"]["echo"])||a["dark"]["echoSwitch"]!=1)return true;r["data"][a["dark"]["field"]]=a["dark"]["echo"]});$.each(r["data"],function(e,a){if(!isArray(a)&&!isObject(a))return true;r["data"][e]=JSON.stringify(a)});r["table"].reload({where:{base:{order:fxApp["base"]["order"]},data:r["data"]}},true);return false});fxBase["dom"]["trigger"]();layui.table.on("sort(moire-table)",function(i){var t=fxApp["base"]["order"];t=fxBase["text"]["explode"](",",t);$.each(t,function(e,a){if(a.indexOf(i.field)==0){t.splice(e,1);return false}});if(isSet(i.type)){t.unshift(i.field+" "+i.type)}t=t.join(",");fxApp["base"]["order"]=t;r["table"].reload({where:{base:{order:t}}},true)});layui.form.on("switch",function(e){var t={data:{}};t["data"][l["base"]["model"]["key"]]=this.value;t["echo"]=e["elem"]["checked"]?1:0;$.each(fxBase["text"]["explode"]("-_",e["elem"]["name"]).reverse(),function(e,a){var i={};i[a]=t["echo"];t["echo"]=i});t["data"]=fxBase["param"]["merge"](t["data"],t["echo"]);fxView["store"]["deal"]({url:l["base"]["api"]["edit"],data:{base:{strict:0},data:t["data"]},extend:{elem:e.othis}})});layui.table.on("edit(moire-table)",function(i){var t={data:{}};t["data"][l["base"]["model"]["key"]]=i.data[l["base"]["model"]["key"]];t["elem"]=$(i.tr).parents(".layui-table-view").find(".layui-table-header");t["echo"]=i.value;$.each(fxBase["text"]["explode"]("-_",i.field).reverse(),function(e,a){var i={};i[a]=t["echo"];t["echo"]=i});t["data"]=fxBase["param"]["merge"](t["data"],t["echo"]);r["echo"]=fxView["store"]["deal"]({url:l["base"]["api"]["edit"],async:false,data:{base:{strict:0},data:t["data"]},extend:{elem:$(this).parent(),tips:false}});try{if(r["echo"]["code"]==-1){r["echo"]["message"]=fxBase["base"]["lang"](["system","abend"])}if(r["echo"]["code"]==200){layui.layer.tips(r["echo"]["message"],$(this).parent(),{time:800,tips:fxBase["math"]["rand"](1,4),tipsMore:true})}else{if(isObject(r["echo"]["extend"]["error"])){r["echo"]["message"]=[];$.each(r["echo"]["extend"]["error"]["data"],function(e,a){if(t["elem"].find("th[data-field="+e+"]").length>0){e=t["elem"].find("th[data-field="+e+"]").find("span:first").html()}else{e=t["elem"].find("th[data-field="+i.field+"]").find("span:first").html()}if(r["echo"]["message"].length>0){r["echo"]["message"].push("and2")}switch(r["echo"]["extend"]["error"]["name"]){default:r["echo"]["message"].push(["[",e,"]"]);break;case"exist":r["echo"]["message"].push(["[",e,":",a,"]"]);break}});switch(r["echo"]["extend"]["error"]["name"]){default:r["echo"]["message"]=fxBase["base"]["lang"]([r["echo"]["message"]]);break;case"exist":r["echo"]["message"]=fxBase["base"]["lang"]([r["echo"]["message"],"existed"]);break;case"lack":r["echo"]["message"]=fxBase["base"]["lang"](["cannot be empty",r["echo"]["message"]]);break}}$.toast({text:r["echo"]["message"],icon:"error",hideAfter:2e3,position:"top-right",stack:3});t["data"][i.field]=i.tr.find("[data-field="+i.field+"] .layui-table-cell").html()}}catch(e){$.toast({text:fxBase["base"]["lang"](["system","abend"]),icon:"error",hideAfter:2e3,position:"top-right",stack:3});t["data"][i.field]=i.tr.find("[data-field="+i.field+"] .layui-table-cell").html()}function e(){i.update(t["data"])}setTimeout(e,30)});layui.table.on("toolbar(moire-table)",function(e){var a=layui.table.checkStatus(e.config.id)["data"];switch(e.event){case"add":case"upload":r["param"]={elem:e.event,param:a,subtitle:e.event};fxView["machine"]["caller"](["mould","tool","window","main"],[r["param"]]);break;case"delete":r["param"]={event:e,param:a,table:r["table"]};fxView["machine"]["caller"](["mould","tool",e.event,"main"],[r["param"]]);break;case"import":case"export":case"download":r["param"]={param:a};fxView["machine"]["caller"](["mould","tool",e.event,"main"],[r["param"]]);break}});layui.table.on("tool(moire-table)",function(n){switch(n.event){case"cell":switch($(this).attr("data-edit")){case"text":$(this).children(".layui-table-edit").css("text-align",$(this).attr("align"));break}break;case"media_video":layui.layer.open({type:1,title:fxy_lang(["view"," - ",fxyCore.data.site.title]),content:fxy_mould({elem:".merl-mould-form",type:"[merl-type=view]"}).prop("outerHTML"),area:["90%","90%"],shadeClose:true,maxmin:true,resize:false,scrollbar:false,success:function(a,e){var i=a.find(".merl-stage tbody"),l=new Image,t={id:n.data.id,name:'<a data-href="'+n.data.extend.url+'">'+n.data.extend.name+"</a>",thumb:'<img src="'+n.data.extend.thumb+'" title="'+n.data.extend.name+'">',"device,id":n.data.device_id,"device,name":n.data.device_name,type:fxyCore.data.site.notes.index[n.data.index]+" - "+fxyCore.data.site.notes.param[n.data.pilot],time_dur:fcf_ftime(n.data.extend.time_dur,"1.2"),content:n.data.extend.content,status:fxyCore.data.site.notes.status[n.data.status],sort:n.data.sort,dateline:n.data.dateline};l.src=n.data.extend.thumb;$.each(t,function(e,a){i.append("<tr><td>"+fxy_lang(dso_split(e))+"</td><td><span>"+a+"</span></td></tr>")});i.find("img,a").on("click",function(){var e,t={};if(l.width==0&&l.height==0){t.width=a.width()/$(document).width()*100;t.height=a.height()/$(document).height()*100}else{t.ratio1=a.width()/l.width;t.ratio2=a.height()/l.height;t.ratio3=t.ratio1<t.ratio2?t.ratio1:t.ratio2;t.width=l.width*t.ratio3/$(document).width()*100;t.height=l.height*t.ratio3/$(document).height()*100}t.tag=$(this).prop("tagName").toLowerCase();t.conf={title:false,area:[t.width+"%",t.height+"%"],closeBtn:false,shadeClose:true,resize:false,scrollbar:false};t.index=n.data.index;t.url=n.data.extend.url;if(t.tag=="img"){t.index="3";t.url=l.src}t.index=String(t.index);switch(t.index){case"1":e=$(this).attr("data-href");e=fxy_mould({elem:".merl-mould-media",type:"[merl-type=video]"}).prop("outerHTML");t.conf=fmo_merge(t.conf,{type:1,content:e,success:function(e,a){var i;e.find("video").attr({src:t.url,poster:n.data.extend.thumb,controls:"controls"}).on("dblclick",function(){if(this.paused){i=this.play();if(i){i.then(function(){}).catch(function(e){})}}else{this.pause()}});fxy_drag({elem:e,wall:true})}});break;case"3":e=fxy_mould({elem:".merl-mould-media",type:"[merl-type=image]"}).prop("outerHTML");t.conf=fmo_merge(t.conf,{type:1,content:e,success:function(e,a){e.find("img").attr({src:t.url,title:n.data.extend.name});fxy_drag({elem:e,wall:true})}});if(l.width==0&&l.height==0){layui.layer.msg(fxy_lang(["image","load","fail"]),{icon:2,time:800});return}break}layui.layer.open(t.conf)})}});break;case"view":case"edit":r["param"]={elem:n.event,param:n.data,subtitle:n.event};fxView["machine"]["caller"](["mould","tool","window","main"],[r["param"]]);break;case"delete":r["param"]={event:n,param:n.data,table:r["table"]};fxView["machine"]["caller"](["mould","tool",n.event,"main"],[r["param"]]);break;case"link":console.log(this);console.log(n);break}})});fxView["machine"]["deployer"](["mould","view","search","main"],function(){var e=[null,"layui"];e=fxBase["param"]["merge"](e,arguments);if(!isFunction(fxView["machine"]["caller"](["mould","view","search","skin",e[1]]))){return fxView["machine"]["caller"](["mould","tool","message","main"],[{text:[e[1],"plugin","not loaded"]}])}fxView["machine"]["caller"](["before"],e,e[0]);fxView["machine"]["caller"](["mould","view","search","skin",e[1]],e);fxView["machine"]["caller"](["after"],e,e[0])});fxView["machine"]["deployer"](["mould","view","search","skin","layui"],function(){var l={base:fxBase["param"]["merge"]({debug:false,skin:"search",tool:{switch:true}},fxView["shelf"]["view"]),data:null,toolbar:fxBase["base"]["template"]({elem:"tool",type:"view-search",cell:"submit,reset,clear,switch"}).html()};var n={};l=fxBase["param"]["merge"](l,arguments[0]);if(!isFunction(l["data"])){return fxView["machine"]["caller"](["mould","tool","message","main"],[{text:["feature","not configured"]}])}n["elem"]=$(".moire-search");n["list"]=fxView["cache"]["elem"]["search"]={};$.each(l["data"](l["base"]["param"]),function(i,t){t["id"]=fxBase["text"]["explode"](",",t["id"]);t["type"]=fxBase["text"]["explode"](",",t["type"]);if(!isSet(t["data"])&&isArray(t["dataRaw"])){t["data"]=fxView["machine"]["caller"](t["dataRaw"][1],null,t["dataRaw"][0]);t["data"]=isSet(t["data"])?t["data"]:t["dataRaw"][2]}$.each(t["type"],function(e,a){if(!isFunction(fxView["machine"]["caller"](["material","elem",a,"main"]))){if(l["base"]["debug"]){console.log(fxBase["base"]["lang"](["material","element","[",fxApp["view"]["langc"]["prefix"]+a,"]","not2","load"]))}return true}n["base"]={};n["base"]["cache"]=n["list"];n["base"]["mould"]=l;n["base"]["pack"]=n["elem"];n["data"]=fxBase["param"]["merge"](1,{field:i,skin:l["base"]["skin"]},t);n["data"]["id"]=!isBlank(t["id"][e])?t["id"][e]:i+"-"+e;n["data"]["type"]=a;n["list"][n["data"]["id"]]=fxView["machine"]["caller"](["material","elem",a,"main"],[]);n["list"][n["data"]["id"]]["init"](n["data"],n["base"])})});$.each(n["list"],function(e,a){a["deploy"]();a["reset"]();$(document).ready(function(){a["done"]()})});n["elem"].append('<div class="layui-col-xs12 moire-button">'+l["toolbar"]+"</div>");layui.form.render();$(".moire-search.layui-form").on("click",".moire-reset",function(){$.each(n["list"],function(e,a){a["reset"]()});layui.form.render()});$(".moire-search.layui-form").on("click",".moire-clean",function(){$.each(n["list"],function(e,a){a["clean"]()});layui.form.render()});$(".moire-search.layui-form").on("click",".moire-switch",function(){if(l["base"]["tool"]["switch"]){n["elem"].find("[moire-elem=elem]").hide();n["elem"].find(".moire-button>:not(.moire-switch)").hide();n["elem"].find(".moire-switch").html(fxBase["base"]["lang"](["unfold"]))}else{n["elem"].find("[moire-elem=elem]").show();n["elem"].find(".moire-button>:not(.moire-switch)").show();n["elem"].find(".moire-switch").html(fxBase["base"]["lang"](["fold"]))}l["base"]["tool"]["switch"]=!l["base"]["tool"]["switch"]})});fxView["machine"]["deployer"](["mould","view","view","main"],function(){var e=[null,"layui"];e=fxBase["param"]["merge"](e,arguments);if(!isFunction(fxView["machine"]["caller"](["mould","view","view","skin",e[1]]))){return fxView["machine"]["caller"](["mould","tool","message","main"],[{text:[e[1],"plugin","not loaded"]}])}fxView["machine"]["caller"](["before"],e,e[0]);fxView["machine"]["caller"](["mould","view","view","skin",e[1]],e);fxView["machine"]["caller"](["after"],e,e[0])});fxView["machine"]["deployer"](["mould","view","view","skin","layui"],function(){var l={base:fxBase["param"]["merge"]({debug:false,skin:"view",source:true},fxView["shelf"]["view"])};var n={};l=fxBase["param"]["merge"](l,arguments[0]);if(!isSet(l["base"]["api"]["elem"])){return $(document).ready(function(){fxView["machine"]["caller"](["mould","tool","message","main"],[{text:["api","not configured"]}]);fxApp["rank"]["self.layer.close"](fxApp["rank"]["self.layer.index"])})}l=fxBase["param"]["merge"](l,{data:null,title:null,window:{title:false},success:function(){fxApp["rank"]["parent.layui.table.reload"]("moire-table");fxApp["rank"]["self.layer.close"](fxApp["rank"]["self.layer.index"])},toolbar:{0:null,1:fxBase["base"]["template"]({elem:"tool",type:"view-edit",cell:"close"}).html()}},l);if(l["window"]["title"]&&self!=top){$(top.document).find("title").html(fxApp["view"]["title"]+" - "+top.fxApp["env"]["title"])}if(!isFunction(l["data"])){return $(document).ready(function(){fxView["machine"]["caller"](["mould","tool","message","main"],[{text:["feature","not configured"]}]);fxApp["rank"]["self.layer.close"](fxApp["rank"]["self.layer.index"])})}n["echo"]={};if(l["base"]["source"]){n["echo"]={url:l["base"]["api"]["elem"],type:"get",async:true,data:{data:{}},success:function(e){n["echo"]=l["echo"]=e;if(n["echo"]["code"]!=200){fxView["machine"]["caller"](["mould","tool","message","main"],[{text:n["echo"]["message"]}]);return fxApp["rank"]["self.layer.close"](fxApp["rank"]["self.layer.index"])}else if(n["echo"]["data"].length==0){fxView["machine"]["caller"](["mould","tool","message","main"],[{text:["data","not","exists"]}]);return fxApp["rank"]["self.layer.close"](fxApp["rank"]["self.layer.index"])}fxView["machine"]["caller"](["cache","render",l["base"]["elem"]],[])}};n["echo"]["data"]["data"][l["base"]["model"]["key"]]=fxApp["data"][l["base"]["model"]["key"]];fxView["store"]["deal"](n["echo"])}$(".moire-wapper").append(fxBase["base"]["template"]({elem:"view",type:"view"}).html());$(".moire-wapper .moire-view").addClass(l["base"]["elem"]);$.each(l["toolbar"],function(e,a){$(".moire-view .moire-button").eq(e).append(a)});n["elem"]=$(".moire-view .moire-table");if(isSet(l["title"])){l["title"]=fxBase["base"]["lang"](l["title"]);n["elem"].before('<div class="moire-thead"><div moire-elem="title">'+l["title"]+"</div></div>")}n["list"]=fxView["cache"]["elem"][l["base"]["elem"]]={};fxView["machine"]["deployer"](["cache","render",l["base"]["elem"]],function(){$.each(l["data"](n["echo"]["data"]),function(i,t){t["id"]=fxBase["text"]["explode"](",",t["id"]);t["type"]=fxBase["text"]["explode"](",",t["type"]);if(!isSet(t["data"])&&isArray(t["dataRaw"])){t["data"]=fxView["machine"]["caller"](t["dataRaw"][1],null,t["dataRaw"][0]);t["data"]=isSet(t["data"])?t["data"]:t["dataRaw"][2]}$.each(t["type"],function(e,a){if(!isFunction(fxView["machine"]["caller"](["material","elem",a,"main"]))){if(l["base"]["debug"]){console.log(fxBase["base"]["lang"](["material","element","[",fxApp["view"]["langc"]["prefix"]+a,"]","not2","load"]))}return true}n["id"]=!isBlank(t["id"][e])?t["id"][e]:i+"-"+e;n["data"]=fxView["machine"]["caller"]([n["id"],"dark"],null,n["list"]);if(n["data"]){n["data"]=fxBase["param"]["merge"](1,{field:i,skin:l["base"]["skin"]},n["data"],t);n["data"]["id"]=md5(n["id"]);n["data"]["type"]=a;n["list"][n["id"]]["init"](n["data"]);return true}n["base"]={};n["base"]["cache"]=n["list"];n["base"]["mould"]=l;n["base"]["pack"]=n["elem"];n["data"]=fxBase["param"]["merge"](1,{field:i,skin:l["base"]["skin"]},t);n["data"]["id"]=md5(n["id"]);n["data"]["type"]=a;n["list"][n["id"]]=fxView["machine"]["caller"](["material","elem",a,"main"],[]);n["list"][n["id"]]["init"](n["data"],n["base"])})});$.each(n["list"],function(e,a){a["deploy"]();a["reset"]();$(document).ready(function(){a["done"]()})});layui.form.render();n["elem"].find("div[moire-cell]").viewer({title:false,zIndex:fxBase["base"]["maxZIndex"]()}).on("show",function(){fxApp["rank"]["self.layer.index.set"](md5(n["elem"].attr("class")))}).on("hide",function(){fxApp["rank"]["self.layer.index.destroy"](md5(n["elem"].attr("class")))})});n["echo"]["data"]={};fxView["machine"]["caller"](["cache","render",l["base"]["elem"]],[]);layui.form.on("submit(moire-submit)",function(e){var a=$(this);try{a.attr("disabled",true);n["data"]={};$.each(n["list"],function(e,t){if(!isSet(t["dark"]["echo"])||t["dark"]["echoSwitch"]!=1)return true;$.each(fxBase["text"]["explode"]("-_",t["dark"]["field"]).reverse(),function(e,a){var i={};i[a]=t["dark"]["echo"];t["dark"]["echo"]=i});n["data"]=fxBase["param"]["merge"](n["data"],t["dark"]["echo"])});$.each(n["data"],function(e,a){if(!isArray(a)&&!isObject(a))return true;n["data"][e]=JSON.stringify(a)});n["echo"]=fxView["store"]["deal"]({url:l["base"]["api"][l["base"]["elem"]],async:false,data:{data:n["data"]},extend:{tips:false}});if(n["echo"]["code"]==-1){n["echo"]["message"]=fxBase["base"]["lang"](["system","abend"])}if(n["echo"]["code"]==200){layui.layer.msg(n["echo"]["message"],{icon:1,time:800},function(){l["success"]();a.attr("disabled",false)})}else{if(isObject(n["echo"]["extend"]["error"])){n["echo"]["message"]=[];$.each(n["echo"]["extend"]["error"]["data"],function(e,a){e=isSet(n["list"][e+"-0"])?fxBase["base"]["lang"](n["list"][e+"-0"]["dark"]["label"]):e;if(n["echo"]["message"].length>0){n["echo"]["message"].push("and2")}switch(n["echo"]["extend"]["error"]["name"]){default:n["echo"]["message"].push(["[",e,"]"]);break;case"exist":n["echo"]["message"].push(["[",e,":",a,"]"]);break}});switch(n["echo"]["extend"]["error"]["name"]){default:n["echo"]["message"]=fxBase["base"]["lang"]([n["echo"]["message"]]);break;case"exist":n["echo"]["message"]=fxBase["base"]["lang"]([n["echo"]["message"],"existed"]);break;case"lack":n["echo"]["message"]=fxBase["base"]["lang"](["cannot be empty",n["echo"]["message"]]);break}}layui.layer.msg(n["echo"]["message"],{icon:2,time:2e3},function(){a.attr("disabled",false)})}}catch(e){layui.layer.msg(fxBase["base"]["lang"](["system","abend"]),{icon:2,time:2e3},function(){a.attr("disabled",false)})}if(self==top){a.attr("disabled",false)}return false});$(".moire-view.layui-form .moire-submit").on("click",function(){var i;$.each(n["list"],function(e,a){i=a["echo"]();if(false===i){return false}});return i});$(".moire-view.layui-form .moire-reset").on("click",function(){$.each(n["list"],function(e,a){a["reset"]()});layui.form.render()});$(".moire-view.layui-form .moire-clean").on("click",function(){$.each(n["list"],function(e,a){a["clean"]()});layui.form.render()});$(".moire-button .moire-close").on("click",function(){fxApp["rank"]["self.layer.close"](fxApp["rank"]["self.layer.index"])})});